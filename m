Return-Path: <nouveau-bounces@lists.freedesktop.org>
X-Original-To: lists+nouveau@lfdr.de
Delivered-To: lists+nouveau@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id BF79813B2E
	for <lists+nouveau@lfdr.de>; Sat,  4 May 2019 18:32:35 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id EAD1689381;
	Sat,  4 May 2019 16:32:28 +0000 (UTC)
X-Original-To: nouveau@lists.freedesktop.org
Delivered-To: nouveau@lists.freedesktop.org
Received: from mail-wm1-f67.google.com (mail-wm1-f67.google.com
 [209.85.128.67])
 by gabe.freedesktop.org (Postfix) with ESMTPS id D61D289381
 for <nouveau@lists.freedesktop.org>; Sat,  4 May 2019 16:32:27 +0000 (UTC)
Received: by mail-wm1-f67.google.com with SMTP id b10so10653287wmj.4
 for <nouveau@lists.freedesktop.org>; Sat, 04 May 2019 09:32:26 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=cPUrt1ZK+Grw2JHWqr9GTnpbRLJtCuu0HdKyiqYycMQ=;
 b=K+7ssJCrcyriw4T2/GTkSdMMi5D5wvAqbAXE46hWqnbm3TPo76tCT/rxOKvHpIJ0uB
 8mKxFGgrpu/YcATCdlV9BaSEgc5xt++9+35CZoDH0csLjb1ckMSoRYtJGmOKT3Sss+uU
 fVQI3iAJQcY15ibW3Oq+xqNMxkkmogbrwp7r/2gxXkTBHDam+e+BcMNmU3TeNyK/Qf4u
 Ie398hBlELGVZHgnujVxmnR1ra9PtWt8yEP32oaHbQHDIJQ0s9Hqd8+m+k1lZGHa1wvz
 r/KegqDywWosdJLdvbDvmS51X/ICWYgfRJA9OjrkbV/87eU/VQkdAkxEhz5MvkcuBkXO
 TKMA==
X-Gm-Message-State: APjAAAWoBcsOIexSwYZucNqeqWXVF19aNAkWsd4oiKPlmxotOwY2IkfC
 F4+yWbHdNOKhBVJj3Bk0wiEqfF4P9Ws=
X-Google-Smtp-Source: APXvYqzcONHzc97RfOf23dc2ku+4qjBvJMKMTzRfcSdiCvJqZcdxgtQwzz04joRwhcXabU0IOmHzmA==
X-Received: by 2002:a1c:9cd5:: with SMTP id f204mr1215640wme.145.1556987545335; 
 Sat, 04 May 2019 09:32:25 -0700 (PDT)
Received: from kherbst.pingu ([2a02:8308:b0be:6900:3cb7:ac97:41a7:519d])
 by smtp.gmail.com with ESMTPSA id z17sm3824707wrm.33.2019.05.04.09.32.23
 (version=TLS1_2 cipher=ECDHE-RSA-CHACHA20-POLY1305 bits=256/256);
 Sat, 04 May 2019 09:32:24 -0700 (PDT)
From: Karol Herbst <kherbst@redhat.com>
To: nouveau@lists.freedesktop.org
Date: Sat,  4 May 2019 18:32:15 +0200
Message-Id: <20190504163219.8349-2-kherbst@redhat.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190504163219.8349-1-kherbst@redhat.com>
References: <20190504163219.8349-1-kherbst@redhat.com>
MIME-Version: 1.0
Subject: [Nouveau] [PATCH 1/5] drm: don't set the pci power state if the pci
 subsystem handles the ACPI bits
X-BeenThere: nouveau@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Nouveau development list <nouveau.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/nouveau>,
 <mailto:nouveau-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/nouveau>
List-Post: <mailto:nouveau@lists.freedesktop.org>
List-Help: <mailto:nouveau-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/nouveau>,
 <mailto:nouveau-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: nouveau-bounces@lists.freedesktop.org
Sender: "Nouveau" <nouveau-bounces@lists.freedesktop.org>

U2lnbmVkLW9mZi1ieTogS2Fyb2wgSGVyYnN0IDxraGVyYnN0QHJlZGhhdC5jb20+Ci0tLQogZHJt
L25vdXZlYXUvbm91dmVhdV9hY3BpLmMgfCAgNiArKystLS0KIGRybS9ub3V2ZWF1L25vdXZlYXVf
YWNwaS5oIHwgIDQgKystLQogZHJtL25vdXZlYXUvbm91dmVhdV9kcm0uYyAgfCAxNSArKysrKysr
KysrKy0tLS0KIGRybS9ub3V2ZWF1L25vdXZlYXVfZHJ2LmggIHwgIDIgKysKIDQgZmlsZXMgY2hh
bmdlZCwgMTggaW5zZXJ0aW9ucygrKSwgOSBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcm0v
bm91dmVhdS9ub3V2ZWF1X2FjcGkuYyBiL2RybS9ub3V2ZWF1L25vdXZlYXVfYWNwaS5jCmluZGV4
IGZmYjE5NTg1Li40OWIxMWQyMiAxMDA2NDQKLS0tIGEvZHJtL25vdXZlYXUvbm91dmVhdV9hY3Bp
LmMKKysrIGIvZHJtL25vdXZlYXUvbm91dmVhdV9hY3BpLmMKQEAgLTM1OSwxMSArMzU5LDExIEBA
IHZvaWQgbm91dmVhdV9yZWdpc3Rlcl9kc21faGFuZGxlcih2b2lkKQogfQogCiAvKiBNdXN0IGJl
IGNhbGxlZCBmb3IgT3B0aW11cyBtb2RlbHMgYmVmb3JlIHRoZSBjYXJkIGNhbiBiZSB0dXJuZWQg
b2ZmICovCi12b2lkIG5vdXZlYXVfc3dpdGNoZXJvb19vcHRpbXVzX2RzbSh2b2lkKQorYm9vbCBu
b3V2ZWF1X3N3aXRjaGVyb29fb3B0aW11c19kc20odm9pZCkKIHsKIAl1MzIgcmVzdWx0ID0gMDsK
IAlpZiAoIW5vdXZlYXVfZHNtX3ByaXYub3B0aW11c19kZXRlY3RlZCB8fCBub3V2ZWF1X2RzbV9w
cml2Lm9wdGltdXNfc2tpcF9kc20pCi0JCXJldHVybjsKKwkJcmV0dXJuIGZhbHNlOwogCiAJaWYg
KG5vdXZlYXVfZHNtX3ByaXYub3B0aW11c19mbGFnc19kZXRlY3RlZCkKIAkJbm91dmVhdV9vcHRp
bXVzX2RzbShub3V2ZWF1X2RzbV9wcml2LmRoYW5kbGUsIE5PVVZFQVVfRFNNX09QVElNVVNfRkxB
R1MsCkBAIC0zNzEsNyArMzcxLDcgQEAgdm9pZCBub3V2ZWF1X3N3aXRjaGVyb29fb3B0aW11c19k
c20odm9pZCkKIAogCW5vdXZlYXVfb3B0aW11c19kc20obm91dmVhdV9kc21fcHJpdi5kaGFuZGxl
LCBOT1VWRUFVX0RTTV9PUFRJTVVTX0NBUFMsCiAJCU5PVVZFQVVfRFNNX09QVElNVVNfU0VUX1BP
V0VSRE9XTiwgJnJlc3VsdCk7Ci0KKwlyZXR1cm4gdHJ1ZTsKIH0KIAogdm9pZCBub3V2ZWF1X3Vu
cmVnaXN0ZXJfZHNtX2hhbmRsZXIodm9pZCkKZGlmZiAtLWdpdCBhL2RybS9ub3V2ZWF1L25vdXZl
YXVfYWNwaS5oIGIvZHJtL25vdXZlYXUvbm91dmVhdV9hY3BpLmgKaW5kZXggYjg2Mjk0ZmMuLjA5
YjJhODJkIDEwMDY0NAotLS0gYS9kcm0vbm91dmVhdS9ub3V2ZWF1X2FjcGkuaAorKysgYi9kcm0v
bm91dmVhdS9ub3V2ZWF1X2FjcGkuaApAQCAtOSw3ICs5LDcgQEAgYm9vbCBub3V2ZWF1X2lzX29w
dGltdXModm9pZCk7CiBib29sIG5vdXZlYXVfaXNfdjFfZHNtKHZvaWQpOwogdm9pZCBub3V2ZWF1
X3JlZ2lzdGVyX2RzbV9oYW5kbGVyKHZvaWQpOwogdm9pZCBub3V2ZWF1X3VucmVnaXN0ZXJfZHNt
X2hhbmRsZXIodm9pZCk7Ci12b2lkIG5vdXZlYXVfc3dpdGNoZXJvb19vcHRpbXVzX2RzbSh2b2lk
KTsKK2Jvb2wgbm91dmVhdV9zd2l0Y2hlcm9vX29wdGltdXNfZHNtKHZvaWQpOwogaW50IG5vdXZl
YXVfYWNwaV9nZXRfYmlvc19jaHVuayh1aW50OF90ICpiaW9zLCBpbnQgb2Zmc2V0LCBpbnQgbGVu
KTsKIGJvb2wgbm91dmVhdV9hY3BpX3JvbV9zdXBwb3J0ZWQoc3RydWN0IGRldmljZSAqKTsKIHZv
aWQgKm5vdXZlYXVfYWNwaV9lZGlkKHN0cnVjdCBkcm1fZGV2aWNlICosIHN0cnVjdCBkcm1fY29u
bmVjdG9yICopOwpAQCAtMTgsNyArMTgsNyBAQCBzdGF0aWMgaW5saW5lIGJvb2wgbm91dmVhdV9p
c19vcHRpbXVzKHZvaWQpIHsgcmV0dXJuIGZhbHNlOyB9Owogc3RhdGljIGlubGluZSBib29sIG5v
dXZlYXVfaXNfdjFfZHNtKHZvaWQpIHsgcmV0dXJuIGZhbHNlOyB9Owogc3RhdGljIGlubGluZSB2
b2lkIG5vdXZlYXVfcmVnaXN0ZXJfZHNtX2hhbmRsZXIodm9pZCkge30KIHN0YXRpYyBpbmxpbmUg
dm9pZCBub3V2ZWF1X3VucmVnaXN0ZXJfZHNtX2hhbmRsZXIodm9pZCkge30KLXN0YXRpYyBpbmxp
bmUgdm9pZCBub3V2ZWF1X3N3aXRjaGVyb29fb3B0aW11c19kc20odm9pZCkge30KK3N0YXRpYyBp
bmxpbmUgYm9vbCBub3V2ZWF1X3N3aXRjaGVyb29fb3B0aW11c19kc20odm9pZCkgeyByZXR1cm4g
ZmFsc2U7IH0KIHN0YXRpYyBpbmxpbmUgYm9vbCBub3V2ZWF1X2FjcGlfcm9tX3N1cHBvcnRlZChz
dHJ1Y3QgZGV2aWNlICpkZXYpIHsgcmV0dXJuIGZhbHNlOyB9CiBzdGF0aWMgaW5saW5lIGludCBu
b3V2ZWF1X2FjcGlfZ2V0X2Jpb3NfY2h1bmsodWludDhfdCAqYmlvcywgaW50IG9mZnNldCwgaW50
IGxlbikgeyByZXR1cm4gLUVJTlZBTDsgfQogc3RhdGljIGlubGluZSB2b2lkICpub3V2ZWF1X2Fj
cGlfZWRpZChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LCBzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29u
bmVjdG9yKSB7IHJldHVybiBOVUxMOyB9CmRpZmYgLS1naXQgYS9kcm0vbm91dmVhdS9ub3V2ZWF1
X2RybS5jIGIvZHJtL25vdXZlYXUvbm91dmVhdV9kcm0uYwppbmRleCA1MDIwMjY1Yi4uNDA1ZWZk
YTIgMTAwNjQ0Ci0tLSBhL2RybS9ub3V2ZWF1L25vdXZlYXVfZHJtLmMKKysrIGIvZHJtL25vdXZl
YXUvbm91dmVhdV9kcm0uYwpAQCAtOTAzLDYgKzkwMyw3IEBAIG5vdXZlYXVfcG1vcHNfcnVudGlt
ZV9zdXNwZW5kKHN0cnVjdCBkZXZpY2UgKmRldikKIHsKIAlzdHJ1Y3QgcGNpX2RldiAqcGRldiA9
IHRvX3BjaV9kZXYoZGV2KTsKIAlzdHJ1Y3QgZHJtX2RldmljZSAqZHJtX2RldiA9IHBjaV9nZXRf
ZHJ2ZGF0YShwZGV2KTsKKwlzdHJ1Y3Qgbm91dmVhdV9kcm0gKmRybSA9IG5vdXZlYXVfZHJtKGRy
bV9kZXYpOwogCWludCByZXQ7CiAKIAlpZiAoIW5vdXZlYXVfcG1vcHNfcnVudGltZSgpKSB7CkBA
IC05MTAsMTIgKzkxMSwxNSBAQCBub3V2ZWF1X3Btb3BzX3J1bnRpbWVfc3VzcGVuZChzdHJ1Y3Qg
ZGV2aWNlICpkZXYpCiAJCXJldHVybiAtRUJVU1k7CiAJfQogCi0Jbm91dmVhdV9zd2l0Y2hlcm9v
X29wdGltdXNfZHNtKCk7CisJZHJtX2Rldi0+c3dpdGNoX3Bvd2VyX3N0YXRlID0gRFJNX1NXSVRD
SF9QT1dFUl9DSEFOR0lORzsKKwlkcm0tPnJ1bnBtX2RzbSA9IG5vdXZlYXVfc3dpdGNoZXJvb19v
cHRpbXVzX2RzbSgpOwogCXJldCA9IG5vdXZlYXVfZG9fc3VzcGVuZChkcm1fZGV2LCB0cnVlKTsK
IAlwY2lfc2F2ZV9zdGF0ZShwZGV2KTsKIAlwY2lfZGlzYWJsZV9kZXZpY2UocGRldik7CiAJcGNp
X2lnbm9yZV9ob3RwbHVnKHBkZXYpOwotCXBjaV9zZXRfcG93ZXJfc3RhdGUocGRldiwgUENJX0Qz
Y29sZCk7CisJaWYgKGRybS0+cnVucG1fZHNtKQorCQlwY2lfc2V0X3Bvd2VyX3N0YXRlKHBkZXYs
IFBDSV9EM2NvbGQpOworCiAJZHJtX2Rldi0+c3dpdGNoX3Bvd2VyX3N0YXRlID0gRFJNX1NXSVRD
SF9QT1dFUl9EWU5BTUlDX09GRjsKIAlyZXR1cm4gcmV0OwogfQpAQCAtOTI1LDcgKzkyOSw4IEBA
IG5vdXZlYXVfcG1vcHNfcnVudGltZV9yZXN1bWUoc3RydWN0IGRldmljZSAqZGV2KQogewogCXN0
cnVjdCBwY2lfZGV2ICpwZGV2ID0gdG9fcGNpX2RldihkZXYpOwogCXN0cnVjdCBkcm1fZGV2aWNl
ICpkcm1fZGV2ID0gcGNpX2dldF9kcnZkYXRhKHBkZXYpOwotCXN0cnVjdCBudmlmX2RldmljZSAq
ZGV2aWNlID0gJm5vdXZlYXVfZHJtKGRybV9kZXYpLT5jbGllbnQuZGV2aWNlOworCXN0cnVjdCBu
b3V2ZWF1X2RybSAqZHJtID0gbm91dmVhdV9kcm0oZHJtX2Rldik7CisJc3RydWN0IG52aWZfZGV2
aWNlICpkZXZpY2UgPSAmZHJtLT5jbGllbnQuZGV2aWNlOwogCWludCByZXQ7CiAKIAlpZiAoIW5v
dXZlYXVfcG1vcHNfcnVudGltZSgpKSB7CkBAIC05MzMsNyArOTM4LDkgQEAgbm91dmVhdV9wbW9w
c19ydW50aW1lX3Jlc3VtZShzdHJ1Y3QgZGV2aWNlICpkZXYpCiAJCXJldHVybiAtRUJVU1k7CiAJ
fQogCi0JcGNpX3NldF9wb3dlcl9zdGF0ZShwZGV2LCBQQ0lfRDApOworCWRybV9kZXYtPnN3aXRj
aF9wb3dlcl9zdGF0ZSA9IERSTV9TV0lUQ0hfUE9XRVJfQ0hBTkdJTkc7CisJaWYgKGRybS0+cnVu
cG1fZHNtKQorCQlwY2lfc2V0X3Bvd2VyX3N0YXRlKHBkZXYsIFBDSV9EMCk7CiAJcGNpX3Jlc3Rv
cmVfc3RhdGUocGRldik7CiAJcmV0ID0gcGNpX2VuYWJsZV9kZXZpY2UocGRldik7CiAJaWYgKHJl
dCkKZGlmZiAtLWdpdCBhL2RybS9ub3V2ZWF1L25vdXZlYXVfZHJ2LmggYi9kcm0vbm91dmVhdS9u
b3V2ZWF1X2Rydi5oCmluZGV4IGRhODQ3MjQ0Li45NDE2MDBlOSAxMDA2NDQKLS0tIGEvZHJtL25v
dXZlYXUvbm91dmVhdV9kcnYuaAorKysgYi9kcm0vbm91dmVhdS9ub3V2ZWF1X2Rydi5oCkBAIC0y
MTQsNiArMjE0LDggQEAgc3RydWN0IG5vdXZlYXVfZHJtIHsKIAlzdHJ1Y3Qgbm91dmVhdV9zdm0g
KnN2bTsKIAogCXN0cnVjdCBub3V2ZWF1X2RtZW0gKmRtZW07CisKKwlib29sIHJ1bnBtX2RzbTsK
IH07CiAKIHN0YXRpYyBpbmxpbmUgc3RydWN0IG5vdXZlYXVfZHJtICoKLS0gCjIuMjAuMQoKX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KTm91dmVhdSBtYWls
aW5nIGxpc3QKTm91dmVhdUBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVl
ZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9ub3V2ZWF1
