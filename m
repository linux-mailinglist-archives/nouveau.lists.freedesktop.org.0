Return-Path: <nouveau-bounces@lists.freedesktop.org>
X-Original-To: lists+nouveau@lfdr.de
Delivered-To: lists+nouveau@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 34B5816B38
	for <lists+nouveau@lfdr.de>; Tue,  7 May 2019 21:23:24 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 689616E82D;
	Tue,  7 May 2019 19:23:22 +0000 (UTC)
X-Original-To: nouveau@lists.freedesktop.org
Delivered-To: nouveau@lists.freedesktop.org
Received: from mail-it1-f195.google.com (mail-it1-f195.google.com
 [209.85.166.195])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 515736E82D
 for <nouveau@lists.freedesktop.org>; Tue,  7 May 2019 19:23:21 +0000 (UTC)
Received: by mail-it1-f195.google.com with SMTP id s3so61737itk.1
 for <nouveau@lists.freedesktop.org>; Tue, 07 May 2019 12:23:21 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc;
 bh=310Zi0rcX5zivLBm9kP9rTNYsZAKc8iGDaRUtq+P69M=;
 b=txPmLv81yV2ZOIjwcPxr/wtF2b1ngCjTXLZQVMyNS4/x9/Dydy00tNPNRaCcnBMz88
 cYYu1eqDYvBnKvkJHpc38uypQNeUxhSEzKXWvM9Wclj1HBjs4rYpGsBFBaEAW7YSlVuA
 lwESwzhA4sx6oAgNy6klI5uqD8MY5sfbYZ9diGFiaMQufjdxGT7CEu7H79bVWQzN/UpO
 6CJGk6gwxDgFmDHEtFb9sltpCqKTYTFi7Gyp5qpcZbr2ONBpA3tibFx+H/kpVhAolTvd
 qQOHwCtWwtlezqs4OvRsn2mz33D+kylKt/PXVkDRBpzhHpQF0pKsnEOAaIgj+mdcF22K
 jNww==
X-Gm-Message-State: APjAAAU5sLi0838ko/gbZ8YWI2iqJHbpedXnwWfnnqJA1jOOUUAueUhA
 FAdjGGENVw1LmoC1FK+8S1JOgntw16CGbskuGK/cdQ==
X-Google-Smtp-Source: APXvYqwAgtpzgC1bDZ+b4690W3cEji7ErRzj1/q9hxeDHvq52ydcxgmg3NZFdjP8bbtGQ5I1VVsZmuJVC6uJrdyrGLI=
X-Received: by 2002:a24:9d46:: with SMTP id f67mr69085itd.58.1557257000607;
 Tue, 07 May 2019 12:23:20 -0700 (PDT)
MIME-Version: 1.0
References: <20190504163219.8349-1-kherbst@redhat.com>
 <20190504163219.8349-2-kherbst@redhat.com>
 <982599421004c5611c3df3cec2bf09e87aef3c8b.camel@redhat.com>
In-Reply-To: <982599421004c5611c3df3cec2bf09e87aef3c8b.camel@redhat.com>
From: Karol Herbst <kherbst@redhat.com>
Date: Tue, 7 May 2019 21:23:09 +0200
Message-ID: <CACO55tvdWUA6q7qUzjAu+L06MdQ0MpLwz+j8qxbBX1A_AQUSAw@mail.gmail.com>
To: Lyude Paul <lyude@redhat.com>
Subject: Re: [Nouveau] [PATCH 1/5] drm: don't set the pci power state if the
 pci subsystem handles the ACPI bits
X-BeenThere: nouveau@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Nouveau development list <nouveau.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/nouveau>,
 <mailto:nouveau-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/nouveau>
List-Post: <mailto:nouveau@lists.freedesktop.org>
List-Help: <mailto:nouveau-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/nouveau>,
 <mailto:nouveau-request@lists.freedesktop.org?subject=subscribe>
Cc: nouveau <nouveau@lists.freedesktop.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: nouveau-bounces@lists.freedesktop.org
Sender: "Nouveau" <nouveau-bounces@lists.freedesktop.org>

T24gVHVlLCBNYXkgNywgMjAxOSBhdCA5OjE2IFBNIEx5dWRlIFBhdWwgPGx5dWRlQHJlZGhhdC5j
b20+IHdyb3RlOgo+Cj4gT24gU2F0LCAyMDE5LTA1LTA0IGF0IDE4OjMyICswMjAwLCBLYXJvbCBI
ZXJic3Qgd3JvdGU6Cj4gPiBTaWduZWQtb2ZmLWJ5OiBLYXJvbCBIZXJic3QgPGtoZXJic3RAcmVk
aGF0LmNvbT4KPiA+IC0tLQo+ID4gIGRybS9ub3V2ZWF1L25vdXZlYXVfYWNwaS5jIHwgIDYgKysr
LS0tCj4gPiAgZHJtL25vdXZlYXUvbm91dmVhdV9hY3BpLmggfCAgNCArKy0tCj4gPiAgZHJtL25v
dXZlYXUvbm91dmVhdV9kcm0uYyAgfCAxNSArKysrKysrKysrKy0tLS0KPiA+ICBkcm0vbm91dmVh
dS9ub3V2ZWF1X2Rydi5oICB8ICAyICsrCj4gPiAgNCBmaWxlcyBjaGFuZ2VkLCAxOCBpbnNlcnRp
b25zKCspLCA5IGRlbGV0aW9ucygtKQo+ID4KPiA+IGRpZmYgLS1naXQgYS9kcm0vbm91dmVhdS9u
b3V2ZWF1X2FjcGkuYyBiL2RybS9ub3V2ZWF1L25vdXZlYXVfYWNwaS5jCj4gPiBpbmRleCBmZmIx
OTU4NS4uNDliMTFkMjIgMTAwNjQ0Cj4gPiAtLS0gYS9kcm0vbm91dmVhdS9ub3V2ZWF1X2FjcGku
Ywo+ID4gKysrIGIvZHJtL25vdXZlYXUvbm91dmVhdV9hY3BpLmMKPiA+IEBAIC0zNTksMTEgKzM1
OSwxMSBAQCB2b2lkIG5vdXZlYXVfcmVnaXN0ZXJfZHNtX2hhbmRsZXIodm9pZCkKPiA+ICB9Cj4g
Pgo+ID4gIC8qIE11c3QgYmUgY2FsbGVkIGZvciBPcHRpbXVzIG1vZGVscyBiZWZvcmUgdGhlIGNh
cmQgY2FuIGJlIHR1cm5lZCBvZmYgKi8KPiA+IC12b2lkIG5vdXZlYXVfc3dpdGNoZXJvb19vcHRp
bXVzX2RzbSh2b2lkKQo+ID4gK2Jvb2wgbm91dmVhdV9zd2l0Y2hlcm9vX29wdGltdXNfZHNtKHZv
aWQpCj4gPiAgewo+ID4gICAgICAgdTMyIHJlc3VsdCA9IDA7Cj4gPiAgICAgICBpZiAoIW5vdXZl
YXVfZHNtX3ByaXYub3B0aW11c19kZXRlY3RlZCB8fAo+ID4gbm91dmVhdV9kc21fcHJpdi5vcHRp
bXVzX3NraXBfZHNtKQo+ID4gLSAgICAgICAgICAgICByZXR1cm47Cj4gPiArICAgICAgICAgICAg
IHJldHVybiBmYWxzZTsKPiA+Cj4gPiAgICAgICBpZiAobm91dmVhdV9kc21fcHJpdi5vcHRpbXVz
X2ZsYWdzX2RldGVjdGVkKQo+ID4gICAgICAgICAgICAgICBub3V2ZWF1X29wdGltdXNfZHNtKG5v
dXZlYXVfZHNtX3ByaXYuZGhhbmRsZSwKPiA+IE5PVVZFQVVfRFNNX09QVElNVVNfRkxBR1MsCj4g
PiBAQCAtMzcxLDcgKzM3MSw3IEBAIHZvaWQgbm91dmVhdV9zd2l0Y2hlcm9vX29wdGltdXNfZHNt
KHZvaWQpCj4gPgo+ID4gICAgICAgbm91dmVhdV9vcHRpbXVzX2RzbShub3V2ZWF1X2RzbV9wcml2
LmRoYW5kbGUsCj4gPiBOT1VWRUFVX0RTTV9PUFRJTVVTX0NBUFMsCj4gPiAgICAgICAgICAgICAg
IE5PVVZFQVVfRFNNX09QVElNVVNfU0VUX1BPV0VSRE9XTiwgJnJlc3VsdCk7Cj4gPiAtCj4gPiAr
ICAgICByZXR1cm4gdHJ1ZTsKPiA+ICB9Cj4gPgo+ID4gIHZvaWQgbm91dmVhdV91bnJlZ2lzdGVy
X2RzbV9oYW5kbGVyKHZvaWQpCj4gPiBkaWZmIC0tZ2l0IGEvZHJtL25vdXZlYXUvbm91dmVhdV9h
Y3BpLmggYi9kcm0vbm91dmVhdS9ub3V2ZWF1X2FjcGkuaAo+ID4gaW5kZXggYjg2Mjk0ZmMuLjA5
YjJhODJkIDEwMDY0NAo+ID4gLS0tIGEvZHJtL25vdXZlYXUvbm91dmVhdV9hY3BpLmgKPiA+ICsr
KyBiL2RybS9ub3V2ZWF1L25vdXZlYXVfYWNwaS5oCj4gPiBAQCAtOSw3ICs5LDcgQEAgYm9vbCBu
b3V2ZWF1X2lzX29wdGltdXModm9pZCk7Cj4gPiAgYm9vbCBub3V2ZWF1X2lzX3YxX2RzbSh2b2lk
KTsKPiA+ICB2b2lkIG5vdXZlYXVfcmVnaXN0ZXJfZHNtX2hhbmRsZXIodm9pZCk7Cj4gPiAgdm9p
ZCBub3V2ZWF1X3VucmVnaXN0ZXJfZHNtX2hhbmRsZXIodm9pZCk7Cj4gPiAtdm9pZCBub3V2ZWF1
X3N3aXRjaGVyb29fb3B0aW11c19kc20odm9pZCk7Cj4gPiArYm9vbCBub3V2ZWF1X3N3aXRjaGVy
b29fb3B0aW11c19kc20odm9pZCk7Cj4gPiAgaW50IG5vdXZlYXVfYWNwaV9nZXRfYmlvc19jaHVu
ayh1aW50OF90ICpiaW9zLCBpbnQgb2Zmc2V0LCBpbnQgbGVuKTsKPiA+ICBib29sIG5vdXZlYXVf
YWNwaV9yb21fc3VwcG9ydGVkKHN0cnVjdCBkZXZpY2UgKik7Cj4gPiAgdm9pZCAqbm91dmVhdV9h
Y3BpX2VkaWQoc3RydWN0IGRybV9kZXZpY2UgKiwgc3RydWN0IGRybV9jb25uZWN0b3IgKik7Cj4g
PiBAQCAtMTgsNyArMTgsNyBAQCBzdGF0aWMgaW5saW5lIGJvb2wgbm91dmVhdV9pc19vcHRpbXVz
KHZvaWQpIHsgcmV0dXJuCj4gPiBmYWxzZTsgfTsKPiA+ICBzdGF0aWMgaW5saW5lIGJvb2wgbm91
dmVhdV9pc192MV9kc20odm9pZCkgeyByZXR1cm4gZmFsc2U7IH07Cj4gPiAgc3RhdGljIGlubGlu
ZSB2b2lkIG5vdXZlYXVfcmVnaXN0ZXJfZHNtX2hhbmRsZXIodm9pZCkge30KPiA+ICBzdGF0aWMg
aW5saW5lIHZvaWQgbm91dmVhdV91bnJlZ2lzdGVyX2RzbV9oYW5kbGVyKHZvaWQpIHt9Cj4gPiAt
c3RhdGljIGlubGluZSB2b2lkIG5vdXZlYXVfc3dpdGNoZXJvb19vcHRpbXVzX2RzbSh2b2lkKSB7
fQo+ID4gK3N0YXRpYyBpbmxpbmUgYm9vbCBub3V2ZWF1X3N3aXRjaGVyb29fb3B0aW11c19kc20o
dm9pZCkgeyByZXR1cm4gZmFsc2U7IH0KPiA+ICBzdGF0aWMgaW5saW5lIGJvb2wgbm91dmVhdV9h
Y3BpX3JvbV9zdXBwb3J0ZWQoc3RydWN0IGRldmljZSAqZGV2KSB7IHJldHVybgo+ID4gZmFsc2U7
IH0KPiA+ICBzdGF0aWMgaW5saW5lIGludCBub3V2ZWF1X2FjcGlfZ2V0X2Jpb3NfY2h1bmsodWlu
dDhfdCAqYmlvcywgaW50IG9mZnNldCwKPiA+IGludCBsZW4pIHsgcmV0dXJuIC1FSU5WQUw7IH0K
PiA+ICBzdGF0aWMgaW5saW5lIHZvaWQgKm5vdXZlYXVfYWNwaV9lZGlkKHN0cnVjdCBkcm1fZGV2
aWNlICpkZXYsIHN0cnVjdAo+ID4gZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yKSB7IHJldHVybiBO
VUxMOyB9Cj4gPiBkaWZmIC0tZ2l0IGEvZHJtL25vdXZlYXUvbm91dmVhdV9kcm0uYyBiL2RybS9u
b3V2ZWF1L25vdXZlYXVfZHJtLmMKPiA+IGluZGV4IDUwMjAyNjViLi40MDVlZmRhMiAxMDA2NDQK
PiA+IC0tLSBhL2RybS9ub3V2ZWF1L25vdXZlYXVfZHJtLmMKPiA+ICsrKyBiL2RybS9ub3V2ZWF1
L25vdXZlYXVfZHJtLmMKPiA+IEBAIC05MDMsNiArOTAzLDcgQEAgbm91dmVhdV9wbW9wc19ydW50
aW1lX3N1c3BlbmQoc3RydWN0IGRldmljZSAqZGV2KQo+ID4gIHsKPiA+ICAgICAgIHN0cnVjdCBw
Y2lfZGV2ICpwZGV2ID0gdG9fcGNpX2RldihkZXYpOwo+ID4gICAgICAgc3RydWN0IGRybV9kZXZp
Y2UgKmRybV9kZXYgPSBwY2lfZ2V0X2RydmRhdGEocGRldik7Cj4gPiArICAgICBzdHJ1Y3Qgbm91
dmVhdV9kcm0gKmRybSA9IG5vdXZlYXVfZHJtKGRybV9kZXYpOwo+ID4gICAgICAgaW50IHJldDsK
PiA+Cj4gPiAgICAgICBpZiAoIW5vdXZlYXVfcG1vcHNfcnVudGltZSgpKSB7Cj4gPiBAQCAtOTEw
LDEyICs5MTEsMTUgQEAgbm91dmVhdV9wbW9wc19ydW50aW1lX3N1c3BlbmQoc3RydWN0IGRldmlj
ZSAqZGV2KQo+ID4gICAgICAgICAgICAgICByZXR1cm4gLUVCVVNZOwo+ID4gICAgICAgfQo+ID4K
PiA+IC0gICAgIG5vdXZlYXVfc3dpdGNoZXJvb19vcHRpbXVzX2RzbSgpOwo+ID4gKyAgICAgZHJt
X2Rldi0+c3dpdGNoX3Bvd2VyX3N0YXRlID0gRFJNX1NXSVRDSF9QT1dFUl9DSEFOR0lORzsKPiA+
ICsgICAgIGRybS0+cnVucG1fZHNtID0gbm91dmVhdV9zd2l0Y2hlcm9vX29wdGltdXNfZHNtKCk7
Cj4KPiBJdCBzZWVtcyBsaWtlIGFsbCBub3V2ZWF1X3N3aXRjaGVyb29fb3B0aW11c19kc20oKSBk
b2VzIGhlcmUgaXMgY2hlY2sKPiBub3V2ZWF1X2RzbV9wcml2Lm9wdGltdXNfZGV0ZWN0ZWQvb3B0
aW11c19za2lwX2RzbS4gV2h5IG5vdCBqdXN0IG1ha2UKPiBhZGQgYSBmdW5jdGlvbiB0byBjaGVj
ayB0aGVzZSB0aGF0IHdlIGNhbGwgd2hlbiBzZXR0aW5nIHVwIHRoZSBEUk0KPiBkZXZpY2UsIHRo
ZW4gc3RvcmUgdGhlIHJlc3VsdCBvZiB0aGF0IGludG8gZHJtLT5ydW5wbV9kc20gaW5zdGVhZCBv
Zgo+IGNoYW5naW5nIGl0IGV2ZXJ5IHRpbWUgd2UgcnVudGltZSBzdXNwZW5kPwo+CgpoZWg/IGFu
ZCBJIGlnbm9yZSBhbnlib2R5IHRlbGxpbmcgbWUgdG8gdXNlIHU4IGluc3RlYWQgb2YgYm9vbHMg
OnAKCj4gPiAgICAgICByZXQgPSBub3V2ZWF1X2RvX3N1c3BlbmQoZHJtX2RldiwgdHJ1ZSk7Cj4g
PiAgICAgICBwY2lfc2F2ZV9zdGF0ZShwZGV2KTsKPiA+ICAgICAgIHBjaV9kaXNhYmxlX2Rldmlj
ZShwZGV2KTsKPiA+ICAgICAgIHBjaV9pZ25vcmVfaG90cGx1ZyhwZGV2KTsKPiA+IC0gICAgIHBj
aV9zZXRfcG93ZXJfc3RhdGUocGRldiwgUENJX0QzY29sZCk7Cj4gPiArICAgICBpZiAoZHJtLT5y
dW5wbV9kc20pCj4gPiArICAgICAgICAgICAgIHBjaV9zZXRfcG93ZXJfc3RhdGUocGRldiwgUENJ
X0QzY29sZCk7Cj4gPiArCj4gPiAgICAgICBkcm1fZGV2LT5zd2l0Y2hfcG93ZXJfc3RhdGUgPSBE
Uk1fU1dJVENIX1BPV0VSX0RZTkFNSUNfT0ZGOwo+ID4gICAgICAgcmV0dXJuIHJldDsKPiA+ICB9
Cj4gPiBAQCAtOTI1LDcgKzkyOSw4IEBAIG5vdXZlYXVfcG1vcHNfcnVudGltZV9yZXN1bWUoc3Ry
dWN0IGRldmljZSAqZGV2KQo+ID4gIHsKPiA+ICAgICAgIHN0cnVjdCBwY2lfZGV2ICpwZGV2ID0g
dG9fcGNpX2RldihkZXYpOwo+ID4gICAgICAgc3RydWN0IGRybV9kZXZpY2UgKmRybV9kZXYgPSBw
Y2lfZ2V0X2RydmRhdGEocGRldik7Cj4gPiAtICAgICBzdHJ1Y3QgbnZpZl9kZXZpY2UgKmRldmlj
ZSA9ICZub3V2ZWF1X2RybShkcm1fZGV2KS0+Y2xpZW50LmRldmljZTsKPiA+ICsgICAgIHN0cnVj
dCBub3V2ZWF1X2RybSAqZHJtID0gbm91dmVhdV9kcm0oZHJtX2Rldik7Cj4gPiArICAgICBzdHJ1
Y3QgbnZpZl9kZXZpY2UgKmRldmljZSA9ICZkcm0tPmNsaWVudC5kZXZpY2U7Cj4gPiAgICAgICBp
bnQgcmV0Owo+ID4KPiA+ICAgICAgIGlmICghbm91dmVhdV9wbW9wc19ydW50aW1lKCkpIHsKPiA+
IEBAIC05MzMsNyArOTM4LDkgQEAgbm91dmVhdV9wbW9wc19ydW50aW1lX3Jlc3VtZShzdHJ1Y3Qg
ZGV2aWNlICpkZXYpCj4gPiAgICAgICAgICAgICAgIHJldHVybiAtRUJVU1k7Cj4gPiAgICAgICB9
Cj4gPgo+ID4gLSAgICAgcGNpX3NldF9wb3dlcl9zdGF0ZShwZGV2LCBQQ0lfRDApOwo+ID4gKyAg
ICAgZHJtX2Rldi0+c3dpdGNoX3Bvd2VyX3N0YXRlID0gRFJNX1NXSVRDSF9QT1dFUl9DSEFOR0lO
RzsKPiA+ICsgICAgIGlmIChkcm0tPnJ1bnBtX2RzbSkKPiA+ICsgICAgICAgICAgICAgcGNpX3Nl
dF9wb3dlcl9zdGF0ZShwZGV2LCBQQ0lfRDApOwo+ID4gICAgICAgcGNpX3Jlc3RvcmVfc3RhdGUo
cGRldik7Cj4gPiAgICAgICByZXQgPSBwY2lfZW5hYmxlX2RldmljZShwZGV2KTsKPiA+ICAgICAg
IGlmIChyZXQpCj4gPiBkaWZmIC0tZ2l0IGEvZHJtL25vdXZlYXUvbm91dmVhdV9kcnYuaCBiL2Ry
bS9ub3V2ZWF1L25vdXZlYXVfZHJ2LmgKPiA+IGluZGV4IGRhODQ3MjQ0Li45NDE2MDBlOSAxMDA2
NDQKPiA+IC0tLSBhL2RybS9ub3V2ZWF1L25vdXZlYXVfZHJ2LmgKPiA+ICsrKyBiL2RybS9ub3V2
ZWF1L25vdXZlYXVfZHJ2LmgKPiA+IEBAIC0yMTQsNiArMjE0LDggQEAgc3RydWN0IG5vdXZlYXVf
ZHJtIHsKPiA+ICAgICAgIHN0cnVjdCBub3V2ZWF1X3N2bSAqc3ZtOwo+ID4KPiA+ICAgICAgIHN0
cnVjdCBub3V2ZWF1X2RtZW0gKmRtZW07Cj4gPiArCj4gPiArICAgICBib29sIHJ1bnBtX2RzbTsK
Pgo+IEkgdGhpbmsgdGhpcyBpcyBzZW1pLXJlY2VudCwgYnV0IHVwc3RyZWFtL2NoZWNrcGF0Y2gg
bm93IHByZWZlcnMgd2UgdXNlCj4gdTggaW4gc3RydWN0cyBpbnN0ZWFkIG9mIHBsYWluIGJvb2xz
Lgo+Cj4gPiAgfTsKPiA+Cj4gPiAgc3RhdGljIGlubGluZSBzdHJ1Y3Qgbm91dmVhdV9kcm0gKgo+
IC0tCj4gQ2hlZXJzLAo+ICAgICAgICAgTHl1ZGUgUGF1bAo+Cl9fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fCk5vdXZlYXUgbWFpbGluZyBsaXN0Ck5vdXZlYXVA
bGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxt
YW4vbGlzdGluZm8vbm91dmVhdQ==
