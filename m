Return-Path: <nouveau-bounces@lists.freedesktop.org>
X-Original-To: lists+nouveau@lfdr.de
Delivered-To: lists+nouveau@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 2485B568E3
	for <lists+nouveau@lfdr.de>; Wed, 26 Jun 2019 14:28:03 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 75D006E3E5;
	Wed, 26 Jun 2019 12:28:01 +0000 (UTC)
X-Original-To: nouveau@lists.freedesktop.org
Delivered-To: nouveau@lists.freedesktop.org
Received: from bombadil.infradead.org (bombadil.infradead.org
 [IPv6:2607:7c80:54:e::133])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 564666E3E9;
 Wed, 26 Jun 2019 12:28:00 +0000 (UTC)
Received: from clnet-p19-102.ikbnet.co.at ([83.175.77.102] helo=localhost)
 by bombadil.infradead.org with esmtpsa (Exim 4.92 #3 (Red Hat Linux))
 id 1hg71o-0001RJ-D7; Wed, 26 Jun 2019 12:27:56 +0000
From: Christoph Hellwig <hch@lst.de>
To: Dan Williams <dan.j.williams@intel.com>,
 =?UTF-8?q?J=C3=A9r=C3=B4me=20Glisse?= <jglisse@redhat.com>,
 Jason Gunthorpe <jgg@mellanox.com>, Ben Skeggs <bskeggs@redhat.com>
Date: Wed, 26 Jun 2019 14:27:10 +0200
Message-Id: <20190626122724.13313-12-hch@lst.de>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190626122724.13313-1-hch@lst.de>
References: <20190626122724.13313-1-hch@lst.de>
MIME-Version: 1.0
X-SRS-Rewrite: SMTP reverse-path rewritten from <hch@infradead.org> by
 bombadil.infradead.org. See http://www.infradead.org/rpr.html
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt;
 c=relaxed/relaxed; 
 d=infradead.org; s=bombadil.20170209; h=Content-Transfer-Encoding:
 MIME-Version:References:In-Reply-To:Message-Id:Date:Subject:Cc:To:From:Sender
 :Reply-To:Content-Type:Content-ID:Content-Description:Resent-Date:Resent-From
 :Resent-Sender:Resent-To:Resent-Cc:Resent-Message-ID:List-Id:List-Help:
 List-Unsubscribe:List-Subscribe:List-Post:List-Owner:List-Archive;
 bh=9nJ/dQhFjQO4BwxUpP2mzPbE9YtD10wJjf4r3VQFN1A=; b=nXboAeYlCcF/zPpOPlIZvUmrzJ
 BTlirQHtzX2iEb6BKwv8oq08WeXcTesdjieof8gl0uUgUWf5wEdBkuVebpF9RqaOiPevnhYkIEcS/
 pjaCaLjEHzt59FXX1qkUyQpExIuKbtyBv5IFulvM7w8K8rC84x4zezBXBYaW46dojoBmGnMVwjqUm
 nF8nfnPRrptXmw0i78mJw+0WcV0vVd9wCisBHxjXgkqM0ANgfmKVYJu2eVwWDcB7vrAgI1scU5arC
 9u78bHoi+wBhSxalLJDEDSdhTQj5G8zS5OswD85z75fNDbwF+X49HHWs6BF57YsOZsFjyLfoem3ay
 xQHtzn2Q==;
Subject: [Nouveau] [PATCH 11/25] memremap: lift the devmap_enable
 manipulation into devm_memremap_pages
X-BeenThere: nouveau@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Nouveau development list <nouveau.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/nouveau>,
 <mailto:nouveau-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/nouveau>
List-Post: <mailto:nouveau@lists.freedesktop.org>
List-Help: <mailto:nouveau-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/nouveau>,
 <mailto:nouveau-request@lists.freedesktop.org?subject=subscribe>
Cc: linux-nvdimm@lists.01.org, linux-pci@vger.kernel.org,
 linux-kernel@vger.kernel.org, dri-devel@lists.freedesktop.org,
 linux-mm@kvack.org, nouveau@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: nouveau-bounces@lists.freedesktop.org
Sender: "Nouveau" <nouveau-bounces@lists.freedesktop.org>

SnVzdCBjaGVjayBpZiB0aGVyZSBpcyBhIC0+cGFnZV9mcmVlIG9wZXJhdGlvbiBzZXQgYW5kIHRh
a2UgY2FyZSBvZiB0aGUKc3RhdGljIGtleSBlbmFibGUsIGFzIHdlbGwgYXMgdGhlIHB1dCB1c2lu
ZyBkZXZpY2UgbWFuYWdlZCByZXNvdXJjZXMuCkFsc28gY2hlY2sgdGhhdCBhIC0+cGFnZV9mcmVl
IGlzIHByb3ZpZGVkIGZvciB0aGUgcGdtYXBzIHR5cGVzIHRoYXQKcmVxdWlyZSBpdCwgYW5kIGNo
ZWNrIGZvciBhIHZhbGlkIHR5cGUgYXMgd2VsbCB3aGlsZSB3ZSBhcmUgYXQgaXQuCgpOb3RlIHRo
YXQgdGhpcyBhbHNvIGZpeGVzIHRoZSBmYWN0IHRoYXQgaG1tIG5ldmVyIGNhbGxlZApkZXZfcGFn
ZW1hcF9wdXRfb3BzIGFuZCB0aHVzIHdvdWxkIGxlYXZlIHRoZSBzbG93IHBhdGggZW5hYmxlZCBm
b3JldmVyLApldmVuIGFmdGVyIGEgZGV2aWNlIGRyaXZlciB1bmxvYWQgb3IgZGlzYWJsZS4KClNp
Z25lZC1vZmYtYnk6IENocmlzdG9waCBIZWxsd2lnIDxoY2hAbHN0LmRlPgotLS0KIGRyaXZlcnMv
bnZkaW1tL3BtZW0uYyB8IDIzICsrKy0tLS0tLS0tLS0tLS0tCiBpbmNsdWRlL2xpbnV4L21tLmgg
ICAgfCAxMCAtLS0tLS0tLQoga2VybmVsL21lbXJlbWFwLmMgICAgIHwgNTkgKysrKysrKysrKysr
KysrKysrKysrKysrKysrLS0tLS0tLS0tLS0tLS0tLQogbW0vaG1tLmMgICAgICAgICAgICAgIHwg
IDIgLS0KIDQgZmlsZXMgY2hhbmdlZCwgNDEgaW5zZXJ0aW9ucygrKSwgNTMgZGVsZXRpb25zKC0p
CgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9udmRpbW0vcG1lbS5jIGIvZHJpdmVycy9udmRpbW0vcG1l
bS5jCmluZGV4IDlkYWM0ODM1OTM1My4uNDg3NjcxNzFhNGRmIDEwMDY0NAotLS0gYS9kcml2ZXJz
L252ZGltbS9wbWVtLmMKKysrIGIvZHJpdmVycy9udmRpbW0vcG1lbS5jCkBAIC0zMzQsMTEgKzMz
NCw2IEBAIHN0YXRpYyB2b2lkIHBtZW1fcmVsZWFzZV9kaXNrKHZvaWQgKl9fcG1lbSkKIAlwdXRf
ZGlzayhwbWVtLT5kaXNrKTsKIH0KIAotc3RhdGljIHZvaWQgcG1lbV9yZWxlYXNlX3BnbWFwX29w
cyh2b2lkICpfX3BnbWFwKQotewotCWRldl9wYWdlbWFwX3B1dF9vcHMoKTsKLX0KLQogc3RhdGlj
IHZvaWQgcG1lbV9wYWdlbWFwX3BhZ2VfZnJlZShzdHJ1Y3QgcGFnZSAqcGFnZSwgdm9pZCAqZGF0
YSkKIHsKIAl3YWtlX3VwX3ZhcigmcGFnZS0+X3JlZmNvdW50KTsKQEAgLTM1MCwxNiArMzQ1LDYg
QEAgc3RhdGljIGNvbnN0IHN0cnVjdCBkZXZfcGFnZW1hcF9vcHMgZnNkYXhfcGFnZW1hcF9vcHMg
PSB7CiAJLmNsZWFudXAJCT0gcG1lbV9wYWdlbWFwX2NsZWFudXAsCiB9OwogCi1zdGF0aWMgaW50
IHNldHVwX3BhZ2VtYXBfZnNkYXgoc3RydWN0IGRldmljZSAqZGV2LCBzdHJ1Y3QgZGV2X3BhZ2Vt
YXAgKnBnbWFwKQotewotCWRldl9wYWdlbWFwX2dldF9vcHMoKTsKLQlpZiAoZGV2bV9hZGRfYWN0
aW9uX29yX3Jlc2V0KGRldiwgcG1lbV9yZWxlYXNlX3BnbWFwX29wcywgcGdtYXApKQotCQlyZXR1
cm4gLUVOT01FTTsKLQlwZ21hcC0+dHlwZSA9IE1FTU9SWV9ERVZJQ0VfRlNfREFYOwotCXBnbWFw
LT5vcHMgPSAmZnNkYXhfcGFnZW1hcF9vcHM7Ci0JcmV0dXJuIDA7Ci19Ci0KIHN0YXRpYyBpbnQg
cG1lbV9hdHRhY2hfZGlzayhzdHJ1Y3QgZGV2aWNlICpkZXYsCiAJCXN0cnVjdCBuZF9uYW1lc3Bh
Y2VfY29tbW9uICpuZG5zKQogewpAQCAtNDE1LDggKzQwMCw4IEBAIHN0YXRpYyBpbnQgcG1lbV9h
dHRhY2hfZGlzayhzdHJ1Y3QgZGV2aWNlICpkZXYsCiAJcG1lbS0+cGZuX2ZsYWdzID0gUEZOX0RF
VjsKIAlwbWVtLT5wZ21hcC5yZWYgPSAmcS0+cV91c2FnZV9jb3VudGVyOwogCWlmIChpc19uZF9w
Zm4oZGV2KSkgewotCQlpZiAoc2V0dXBfcGFnZW1hcF9mc2RheChkZXYsICZwbWVtLT5wZ21hcCkp
Ci0JCQlyZXR1cm4gLUVOT01FTTsKKwkJcG1lbS0+cGdtYXAudHlwZSA9IE1FTU9SWV9ERVZJQ0Vf
RlNfREFYOworCQlwbWVtLT5wZ21hcC5vcHMgPSAmZnNkYXhfcGFnZW1hcF9vcHM7CiAJCWFkZHIg
PSBkZXZtX21lbXJlbWFwX3BhZ2VzKGRldiwgJnBtZW0tPnBnbWFwKTsKIAkJcGZuX3NiID0gbmRf
cGZuLT5wZm5fc2I7CiAJCXBtZW0tPmRhdGFfb2Zmc2V0ID0gbGU2NF90b19jcHUocGZuX3NiLT5k
YXRhb2ZmKTsKQEAgLTQyOCw4ICs0MTMsOCBAQCBzdGF0aWMgaW50IHBtZW1fYXR0YWNoX2Rpc2so
c3RydWN0IGRldmljZSAqZGV2LAogCX0gZWxzZSBpZiAocG1lbV9zaG91bGRfbWFwX3BhZ2VzKGRl
dikpIHsKIAkJbWVtY3B5KCZwbWVtLT5wZ21hcC5yZXMsICZuc2lvLT5yZXMsIHNpemVvZihwbWVt
LT5wZ21hcC5yZXMpKTsKIAkJcG1lbS0+cGdtYXAuYWx0bWFwX3ZhbGlkID0gZmFsc2U7Ci0JCWlm
IChzZXR1cF9wYWdlbWFwX2ZzZGF4KGRldiwgJnBtZW0tPnBnbWFwKSkKLQkJCXJldHVybiAtRU5P
TUVNOworCQlwbWVtLT5wZ21hcC50eXBlID0gTUVNT1JZX0RFVklDRV9GU19EQVg7CisJCXBtZW0t
PnBnbWFwLm9wcyA9ICZmc2RheF9wYWdlbWFwX29wczsKIAkJYWRkciA9IGRldm1fbWVtcmVtYXBf
cGFnZXMoZGV2LCAmcG1lbS0+cGdtYXApOwogCQlwbWVtLT5wZm5fZmxhZ3MgfD0gUEZOX01BUDsK
IAkJbWVtY3B5KCZiYl9yZXMsICZwbWVtLT5wZ21hcC5yZXMsIHNpemVvZihiYl9yZXMpKTsKZGlm
ZiAtLWdpdCBhL2luY2x1ZGUvbGludXgvbW0uaCBiL2luY2x1ZGUvbGludXgvbW0uaAppbmRleCA2
ZTRiOWJlMDhiMTMuLmFhMzk3MDI5MWNkZiAxMDA2NDQKLS0tIGEvaW5jbHVkZS9saW51eC9tbS5o
CisrKyBiL2luY2x1ZGUvbGludXgvbW0uaApAQCAtOTMyLDggKzkzMiw2IEBAIHN0YXRpYyBpbmxp
bmUgYm9vbCBpc196b25lX2RldmljZV9wYWdlKGNvbnN0IHN0cnVjdCBwYWdlICpwYWdlKQogI2Vu
ZGlmCiAKICNpZmRlZiBDT05GSUdfREVWX1BBR0VNQVBfT1BTCi12b2lkIGRldl9wYWdlbWFwX2dl
dF9vcHModm9pZCk7Ci12b2lkIGRldl9wYWdlbWFwX3B1dF9vcHModm9pZCk7CiB2b2lkIF9fcHV0
X2Rldm1hcF9tYW5hZ2VkX3BhZ2Uoc3RydWN0IHBhZ2UgKnBhZ2UpOwogREVDTEFSRV9TVEFUSUNf
S0VZX0ZBTFNFKGRldm1hcF9tYW5hZ2VkX2tleSk7CiBzdGF0aWMgaW5saW5lIGJvb2wgcHV0X2Rl
dm1hcF9tYW5hZ2VkX3BhZ2Uoc3RydWN0IHBhZ2UgKnBhZ2UpCkBAIC05NzMsMTQgKzk3MSw2IEBA
IHN0YXRpYyBpbmxpbmUgYm9vbCBpc19wY2lfcDJwZG1hX3BhZ2UoY29uc3Qgc3RydWN0IHBhZ2Ug
KnBhZ2UpCiAjZW5kaWYgLyogQ09ORklHX1BDSV9QMlBETUEgKi8KIAogI2Vsc2UgLyogQ09ORklH
X0RFVl9QQUdFTUFQX09QUyAqLwotc3RhdGljIGlubGluZSB2b2lkIGRldl9wYWdlbWFwX2dldF9v
cHModm9pZCkKLXsKLX0KLQotc3RhdGljIGlubGluZSB2b2lkIGRldl9wYWdlbWFwX3B1dF9vcHMo
dm9pZCkKLXsKLX0KLQogc3RhdGljIGlubGluZSBib29sIHB1dF9kZXZtYXBfbWFuYWdlZF9wYWdl
KHN0cnVjdCBwYWdlICpwYWdlKQogewogCXJldHVybiBmYWxzZTsKZGlmZiAtLWdpdCBhL2tlcm5l
bC9tZW1yZW1hcC5jIGIva2VybmVsL21lbXJlbWFwLmMKaW5kZXggMDBjMWNlYjYwYzE5Li4zMjE5
YTRjOTFkMDcgMTAwNjQ0Ci0tLSBhL2tlcm5lbC9tZW1yZW1hcC5jCisrKyBiL2tlcm5lbC9tZW1y
ZW1hcC5jCkBAIC0xNyw2ICsxNywzNSBAQCBzdGF0aWMgREVGSU5FX1hBUlJBWShwZ21hcF9hcnJh
eSk7CiAjZGVmaW5lIFNFQ1RJT05fTUFTSyB+KCgxVUwgPDwgUEFfU0VDVElPTl9TSElGVCkgLSAx
KQogI2RlZmluZSBTRUNUSU9OX1NJWkUgKDFVTCA8PCBQQV9TRUNUSU9OX1NISUZUKQogCisjaWZk
ZWYgQ09ORklHX0RFVl9QQUdFTUFQX09QUworREVGSU5FX1NUQVRJQ19LRVlfRkFMU0UoZGV2bWFw
X21hbmFnZWRfa2V5KTsKK0VYUE9SVF9TWU1CT0woZGV2bWFwX21hbmFnZWRfa2V5KTsKK3N0YXRp
YyBhdG9taWNfdCBkZXZtYXBfbWFuYWdlZF9lbmFibGU7CisKK3N0YXRpYyB2b2lkIGRldm1hcF9t
YW5hZ2VkX2VuYWJsZV9wdXQodm9pZCAqZGF0YSkKK3sKKwlpZiAoYXRvbWljX2RlY19hbmRfdGVz
dCgmZGV2bWFwX21hbmFnZWRfZW5hYmxlKSkKKwkJc3RhdGljX2JyYW5jaF9kaXNhYmxlKCZkZXZt
YXBfbWFuYWdlZF9rZXkpOworfQorCitzdGF0aWMgaW50IGRldm1hcF9tYW5hZ2VkX2VuYWJsZV9n
ZXQoc3RydWN0IGRldmljZSAqZGV2LCBzdHJ1Y3QgZGV2X3BhZ2VtYXAgKnBnbWFwKQoreworCWlm
ICghcGdtYXAtPm9wcy0+cGFnZV9mcmVlKSB7CisJCVdBUk4oMSwgIk1pc3NpbmcgcGFnZV9mcmVl
IG1ldGhvZFxuIik7CisJCXJldHVybiAtRUlOVkFMOworCX0KKworCWlmIChhdG9taWNfaW5jX3Jl
dHVybigmZGV2bWFwX21hbmFnZWRfZW5hYmxlKSA9PSAxKQorCQlzdGF0aWNfYnJhbmNoX2VuYWJs
ZSgmZGV2bWFwX21hbmFnZWRfa2V5KTsKKwlyZXR1cm4gZGV2bV9hZGRfYWN0aW9uX29yX3Jlc2V0
KGRldiwgZGV2bWFwX21hbmFnZWRfZW5hYmxlX3B1dCwgTlVMTCk7Cit9CisjZWxzZQorc3RhdGlj
IGludCBkZXZtYXBfbWFuYWdlZF9lbmFibGVfZ2V0KHN0cnVjdCBkZXZpY2UgKmRldiwgc3RydWN0
IGRldl9wYWdlbWFwICpwZ21hcCkKK3sKKwlyZXR1cm4gLUVJTlZBTDsKK30KKyNlbmRpZiAvKiBD
T05GSUdfREVWX1BBR0VNQVBfT1BTICovCisKICNpZiBJU19FTkFCTEVEKENPTkZJR19ERVZJQ0Vf
UFJJVkFURSkKIHZtX2ZhdWx0X3QgZGV2aWNlX3ByaXZhdGVfZW50cnlfZmF1bHQoc3RydWN0IHZt
X2FyZWFfc3RydWN0ICp2bWEsCiAJCSAgICAgICB1bnNpZ25lZCBsb25nIGFkZHIsCkBAIC0xNTYs
NiArMTg1LDcgQEAgdm9pZCAqZGV2bV9tZW1yZW1hcF9wYWdlcyhzdHJ1Y3QgZGV2aWNlICpkZXYs
IHN0cnVjdCBkZXZfcGFnZW1hcCAqcGdtYXApCiAJfTsKIAlwZ3Byb3RfdCBwZ3Byb3QgPSBQQUdF
X0tFUk5FTDsKIAlpbnQgZXJyb3IsIG5pZCwgaXNfcmFtOworCWJvb2wgbmVlZF9kZXZtYXBfbWFu
YWdlZCA9IHRydWU7CiAKIAlzd2l0Y2ggKHBnbWFwLT50eXBlKSB7CiAJY2FzZSBNRU1PUllfREVW
SUNFX1BSSVZBVEU6CkBAIC0xNzMsNiArMjAzLDcgQEAgdm9pZCAqZGV2bV9tZW1yZW1hcF9wYWdl
cyhzdHJ1Y3QgZGV2aWNlICpkZXYsIHN0cnVjdCBkZXZfcGFnZW1hcCAqcGdtYXApCiAJCWJyZWFr
OwogCWNhc2UgTUVNT1JZX0RFVklDRV9ERVZEQVg6CiAJY2FzZSBNRU1PUllfREVWSUNFX1BDSV9Q
MlBETUE6CisJCW5lZWRfZGV2bWFwX21hbmFnZWQgPSBmYWxzZTsKIAkJYnJlYWs7CiAJZGVmYXVs
dDoKIAkJV0FSTigxLCAiSW52YWxpZCBwZ21hcCB0eXBlICVkXG4iLCBwZ21hcC0+dHlwZSk7CkBA
IC0xODUsNiArMjE2LDEyIEBAIHZvaWQgKmRldm1fbWVtcmVtYXBfcGFnZXMoc3RydWN0IGRldmlj
ZSAqZGV2LCBzdHJ1Y3QgZGV2X3BhZ2VtYXAgKnBnbWFwKQogCQlyZXR1cm4gRVJSX1BUUigtRUlO
VkFMKTsKIAl9CiAKKwlpZiAobmVlZF9kZXZtYXBfbWFuYWdlZCkgeworCQllcnJvciA9IGRldm1h
cF9tYW5hZ2VkX2VuYWJsZV9nZXQoZGV2LCBwZ21hcCk7CisJCWlmIChlcnJvcikKKwkJCXJldHVy
biBFUlJfUFRSKGVycm9yKTsKKwl9CisKIAlhbGlnbl9zdGFydCA9IHJlcy0+c3RhcnQgJiB+KFNF
Q1RJT05fU0laRSAtIDEpOwogCWFsaWduX3NpemUgPSBBTElHTihyZXMtPnN0YXJ0ICsgcmVzb3Vy
Y2Vfc2l6ZShyZXMpLCBTRUNUSU9OX1NJWkUpCiAJCS0gYWxpZ25fc3RhcnQ7CkBAIC0zNTEsMjgg
KzM4OCw2IEBAIHN0cnVjdCBkZXZfcGFnZW1hcCAqZ2V0X2Rldl9wYWdlbWFwKHVuc2lnbmVkIGxv
bmcgcGZuLAogRVhQT1JUX1NZTUJPTF9HUEwoZ2V0X2Rldl9wYWdlbWFwKTsKIAogI2lmZGVmIENP
TkZJR19ERVZfUEFHRU1BUF9PUFMKLURFRklORV9TVEFUSUNfS0VZX0ZBTFNFKGRldm1hcF9tYW5h
Z2VkX2tleSk7Ci1FWFBPUlRfU1lNQk9MKGRldm1hcF9tYW5hZ2VkX2tleSk7Ci1zdGF0aWMgYXRv
bWljX3QgZGV2bWFwX2VuYWJsZTsKLQotLyoKLSAqIFRvZ2dsZSB0aGUgc3RhdGljIGtleSBmb3Ig
LT5wYWdlX2ZyZWUoKSBjYWxsYmFja3Mgd2hlbiBkZXZfcGFnZW1hcAotICogcGFnZXMgZ28gaWRs
ZS4KLSAqLwotdm9pZCBkZXZfcGFnZW1hcF9nZXRfb3BzKHZvaWQpCi17Ci0JaWYgKGF0b21pY19p
bmNfcmV0dXJuKCZkZXZtYXBfZW5hYmxlKSA9PSAxKQotCQlzdGF0aWNfYnJhbmNoX2VuYWJsZSgm
ZGV2bWFwX21hbmFnZWRfa2V5KTsKLX0KLUVYUE9SVF9TWU1CT0xfR1BMKGRldl9wYWdlbWFwX2dl
dF9vcHMpOwotCi12b2lkIGRldl9wYWdlbWFwX3B1dF9vcHModm9pZCkKLXsKLQlpZiAoYXRvbWlj
X2RlY19hbmRfdGVzdCgmZGV2bWFwX2VuYWJsZSkpCi0JCXN0YXRpY19icmFuY2hfZGlzYWJsZSgm
ZGV2bWFwX21hbmFnZWRfa2V5KTsKLX0KLUVYUE9SVF9TWU1CT0xfR1BMKGRldl9wYWdlbWFwX3B1
dF9vcHMpOwotCiB2b2lkIF9fcHV0X2Rldm1hcF9tYW5hZ2VkX3BhZ2Uoc3RydWN0IHBhZ2UgKnBh
Z2UpCiB7CiAJaW50IGNvdW50ID0gcGFnZV9yZWZfZGVjX3JldHVybihwYWdlKTsKZGlmZiAtLWdp
dCBhL21tL2htbS5jIGIvbW0vaG1tLmMKaW5kZXggOTg3NzkzZmJhOTIzLi41YjBiZDVmNmE3NGYg
MTAwNjQ0Ci0tLSBhL21tL2htbS5jCisrKyBiL21tL2htbS5jCkBAIC0xNDE1LDggKzE0MTUsNiBA
QCBzdHJ1Y3QgaG1tX2Rldm1lbSAqaG1tX2Rldm1lbV9hZGQoY29uc3Qgc3RydWN0IGhtbV9kZXZt
ZW1fb3BzICpvcHMsCiAJdm9pZCAqcmVzdWx0OwogCWludCByZXQ7CiAKLQlkZXZfcGFnZW1hcF9n
ZXRfb3BzKCk7Ci0KIAlkZXZtZW0gPSBkZXZtX2t6YWxsb2MoZGV2aWNlLCBzaXplb2YoKmRldm1l
bSksIEdGUF9LRVJORUwpOwogCWlmICghZGV2bWVtKQogCQlyZXR1cm4gRVJSX1BUUigtRU5PTUVN
KTsKLS0gCjIuMjAuMQoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX18KTm91dmVhdSBtYWlsaW5nIGxpc3QKTm91dmVhdUBsaXN0cy5mcmVlZGVza3RvcC5vcmcK
aHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9ub3V2ZWF1
