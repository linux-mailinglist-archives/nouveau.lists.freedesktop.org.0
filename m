Return-Path: <nouveau-bounces@lists.freedesktop.org>
X-Original-To: lists+nouveau@lfdr.de
Delivered-To: lists+nouveau@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 51DC010A12C
	for <lists+nouveau@lfdr.de>; Tue, 26 Nov 2019 16:26:12 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id C281B6E41A;
	Tue, 26 Nov 2019 15:26:10 +0000 (UTC)
X-Original-To: nouveau@lists.freedesktop.org
Delivered-To: nouveau@lists.freedesktop.org
Received: from us-smtp-delivery-1.mimecast.com (us-smtp-1.mimecast.com
 [205.139.110.61])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 218986E41A
 for <nouveau@lists.freedesktop.org>; Tue, 26 Nov 2019 15:26:10 +0000 (UTC)
Received: from mail-wm1-f71.google.com (mail-wm1-f71.google.com
 [209.85.128.71]) (Using TLS) by relay.mimecast.com with ESMTP id
 us-mta-144-uisxCPaOO6aLK_8vgQeWGQ-1; Tue, 26 Nov 2019 10:26:07 -0500
Received: by mail-wm1-f71.google.com with SMTP id n18so792917wmi.8
 for <nouveau@lists.freedesktop.org>; Tue, 26 Nov 2019 07:26:07 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:to:from:subject:cc:message-id:date:user-agent
 :mime-version:content-language:content-transfer-encoding;
 bh=tiv0XN9Z1tjeYj4pVjKRXWaBCcMUf4lDxXaIghURbZY=;
 b=P+Ubr0IQCQdYXhkgG8cE4KBDxv+z4ai8uT8IBVEYJwv30QsaR3zbtnr+v+W18dWdpW
 g4YIdOjXbldDj9RwGeN4xxZGCu/+blngVUF9xSDMF/Gbiws3uRBpbEs9soLYemCoODBe
 yNbdD7Eu9GHW79XbDbabrkMN/GCQ9SQ2C3woF7V2/54geEP9qo463ZqPpbg1AFvVOGx1
 KWuwuba4SoYxyyAQ1YIRye1/OwBWvV8tOeKYRWknv4trRQOsLXkLKByIe9kKonLal+YY
 s5IzsZuGsctrlG7sl0lnaxl6rBc8FSWdj3kk1I4v4ALhmOawbRe4GvHUQZ6DqkmZSvY1
 TCrw==
X-Gm-Message-State: APjAAAXQADCH9RSMmXWp2ovoRzhmm5wf+eRK00Jscwv0l/DQeAhkpljU
 yU8HDFwaxhMJyu58ht7jReVezcaczlralHMrR4OEbn4IogROyGCV9ahkBYfRhXsvTcrH04kWxnW
 z240AxPDC7XxbQT+7riI2Pr0Bsg==
X-Received: by 2002:a1c:ab0a:: with SMTP id u10mr5198281wme.0.1574781965974;
 Tue, 26 Nov 2019 07:26:05 -0800 (PST)
X-Google-Smtp-Source: APXvYqzoNmFBonMXf34EH/Cy4wq6+8bdAYe/3w8pBmEoUPDVMPQPCp8s+C9W1iAYfc6zGThVZ6qxVA==
X-Received: by 2002:a1c:ab0a:: with SMTP id u10mr5198256wme.0.1574781965692;
 Tue, 26 Nov 2019 07:26:05 -0800 (PST)
Received: from shalem.localdomain (84-106-84-65.cable.dynamic.v4.ziggo.nl.
 [84.106.84.65])
 by smtp.gmail.com with ESMTPSA id x2sm3302356wmc.3.2019.11.26.07.26.04
 (version=TLS1_3 cipher=TLS_AES_128_GCM_SHA256 bits=128/128);
 Tue, 26 Nov 2019 07:26:05 -0800 (PST)
To: Ben Skeggs <bskeggs@redhat.com>, Lyude Paul <lyude@redhat.com>
From: Hans de Goede <hdegoede@redhat.com>
Message-ID: <28490f16-2813-9b08-ae50-04bacc0c20c2@redhat.com>
Date: Tue, 26 Nov 2019 16:26:04 +0100
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:68.0) Gecko/20100101
 Thunderbird/68.2.0
MIME-Version: 1.0
Content-Language: en-US
X-MC-Unique: uisxCPaOO6aLK_8vgQeWGQ-1
X-Mimecast-Spam-Score: 0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=redhat.com; 
 s=mimecast20190719; t=1574781969;
 h=from:from:reply-to:subject:subject:date:date:message-id:message-id:
 to:to:cc:cc:mime-version:mime-version:content-type:content-type:
 content-transfer-encoding:content-transfer-encoding;
 bh=tiv0XN9Z1tjeYj4pVjKRXWaBCcMUf4lDxXaIghURbZY=;
 b=QuhcgZmVrfiWGOwCi3J4Sd97Qu29UxGd+9HV+QQ6y73R1GMABoCinZ1lVawemwXD+db9ED
 U3Hwt6ROW6KbcVU8uDQWLG/G7EqprUTzL8sILacqBIZ9s+u/xSPMMwQdFoJ0y5/FBTEJ+r
 latkQpO233xvtVhxeN2hDa1eWIHoR88=
Subject: [Nouveau] nouveau regression [bisected] hotplug broken on gf108
 since 4.1
X-BeenThere: nouveau@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Nouveau development list <nouveau.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/nouveau>,
 <mailto:nouveau-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/nouveau>
List-Post: <mailto:nouveau@lists.freedesktop.org>
List-Help: <mailto:nouveau-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/nouveau>,
 <mailto:nouveau-request@lists.freedesktop.org?subject=subscribe>
Cc: "nouveau@lists.freedesktop.org" <nouveau@lists.freedesktop.org>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: nouveau-bounces@lists.freedesktop.org
Sender: "Nouveau" <nouveau-bounces@lists.freedesktop.org>

SGkgQWxsLAoKSSdtIGhhdmluZyB0aGlzIHJlYWxseSB3ZWlyZCBpc3N1ZSB3aXRoIGJyb2tlbiBo
b3RwbHVnIG9uIGEgRGVsbCBMYXRpdHVkZSBFNjQzMCB3aXRoCmh5YnJpZCBnZngsIHdpdGggYSBn
ZjEwOCBhcyBkaXNjcmV0ZSBHUFUuCgpUaGUgTENEIHBhbmVsIGFuZCBWR0EgYXJlIGNvbm5lY3Rl
ZCB0aHJvdWdoIGEgbXV4IHRvIHRoZSBpR1BVLCBidXQgdGhlIEhETUkgaXMgb25seQpjb25uZWN0
ZWQgdG8gdGhlIG52aWRpYSBkR1BVLiBQbHVnZ2luZyBpbiBhIEhETUkgbW9uaXRvciB3aGVuIHRo
ZSBkR1BVIGlzIHN1c3BlbmQKd29ya3MgZmluZSwgdGhlIEFDUEkgZXZlbnQgZmlyZXMgYW5kIGV2
ZXJ5dGhpbmcgd29ya3MgYXMgaXQgc2hvdWxkLgoKVW5wbHVnZ2luZyB0aGUgSERNSSBPVE9ILCBv
ciBwbHVnZ2luZyBpdCBpbiB3aGVuIHRoZSBkR1BVIGlzIF9ub3RfIHN1c3BlbmRlZCBkb2VzCm5v
dCB3b3JrIHVudGlsIEkgbWFudWFsbHkgcnVuIHhyYW5kci4KCkkndmUgYmlzZWN0ZWQgdGhpcyBh
bmQgdGhlIGJpc2VjdCBwb2ludHMgdG86CgpjZmVhODhhNGQ4NjYgKCJkcm0vbm91dmVhdTogU3Rh
cnQgdXNpbmcgbmV3IGRybV9kZXYgaW5pdGlhbGl6YXRpb24gaGVscGVycyIpLAp3aGljaCBsYW5k
ZWQgaW4gNC4yMAoKV2hpY2ggZnVuY3Rpb25hbGx5IG1ha2VzIG5vIGNoYW5nZXMgb3RoZXIgdGhl
biBzb21lIHN1YnRsZSBjaGFuZ2VzIHRvIHRoZQppbml0aWFsaXphdGlvbiBvcmRlci4gSSd2ZSBi
ZWVuIHBva2luZyB0aGluZ3Mgc3Vycm91bmRpbmcgdGhpcyB0aGUgZW50aXJlCmRheSBidXQgbm8g
bHVjay4KCk9uZSB0aGluZyB3aGljaCBJIGRpZCBmb3VuZCBvdXQsIGlzIHRoYXQgSSBjYW4gYnJl
YWsgdGhlIGNvbW1pdCBiZWZvcmUgdGhlCnRyb3VibGVzb21lIGNvbW1pdCB0byBiZWhhdmUgaW4g
dGhlIGV4YWN0IHNhbWUgd2F5IGJ5IGNvbW1lbnRpbmcgb3V0IHRoZQpkcm1fc3lzZnNfaG90cGx1
Z19ldmVudCgpIGNhbGwgZnJvbSBkcm1fc3lzZnNfY29ubmVjdG9yX2FkZCgpLgoKT25lIHRoaW5n
IHRvIG5vdGUgaGVyZSBpcyB0aGF0IGRybV9yZWdpc3Rlcl9jb25uZWN0b3IgaGFzIHRoZSBmb2xs
b3dpbmcgYXQKdGhlIHRvcDoKCiAgICAgICAgIGlmICghY29ubmVjdG9yLT5kZXYtPnJlZ2lzdGVy
ZWQpCiAgICAgICAgICAgICAgICAgcmV0dXJuIDA7CgpCZWZvcmUgdGhlIHRyb3VibGVzb21lIGNv
bW1pdCwgd2hlbiB3ZSBzdGlsbCBoYWQgYSBsb2FkIGNhbGxiYWNrLCB0aGlzCmNoZWNrIHdvdWxk
IG5vdCBiZSBoaXQgd2hlbiBub3V2ZWF1X2RybV9sb2FkKCkgKG5vdyBub3V2ZWF1X2RybV9kZXZp
Y2VfaW5pdCgpCnJhbiBhcyBkcm1fZGV2X3JlZ2lzdGVyIGRvZXM6CgogICAgICAgICBkZXYtPnJl
Z2lzdGVyZWQgPSB0cnVlOwoKICAgICAgICAgaWYgKGRldi0+ZHJpdmVyLT5sb2FkKSB7CiAgICAg
ICAgICAgICAgICAgcmV0ID0gZGV2LT5kcml2ZXItPmxvYWQoZGV2LCBmbGFncyk7CiAgICAgICAg
ICAgICAgICAgaWYgKHJldCkKICAgICAgICAgICAgICAgICAgICAgICAgIGdvdG8gZXJyX21pbm9y
czsKICAgICAgICAgfQoKU28gd291bGQgcmVnaXN0ZXIgdGhlIGNvbm5lY3RvcnMgZGlyZWN0bHkg
ZnJvbSBub3V2ZWF1X2RybV9sb2FkKCkvbm91dmVhdV9kcm1fZGV2aWNlX2luaXQoKQoodGhyb3Vn
aCB0aGUgIGRybV9yZWdpc3Rlcl9jb25uZWN0b3IoKSBjYWxsIGF0IHRoZSBlbmQgb2Ygbm91dmVh
dV9jb25uZWN0b3JfY3JlYXRlKS4KClNpbmNlIHRoZSB0cm91Ymxlc29tZSBjb21taXQgd2UgZG8g
aGl0IHRoZSBpZiBpbiBxdWVzdGlvbiBzaW5jZSB3ZSBub3cgY2FsbApub3V2ZWF1X2RybV9kZXZp
Y2VfaW5pdCgpIGJlZm9yZSBkcm1fZGV2X3JlZ2lzdGVyKCksIHR1cm5pbmcgdGhlIGRybV9yZWdp
c3Rlcl9jb25uZWN0b3IoKQpjYWxsIGF0IHRoZSBlbmQgb2Ygbm91dmVhdV9jb25uZWN0b3JfY3Jl
YXRlIGluIGEgbm8tb3AgZm9yIG5vbiBkcC1tc3QgY29ubmVjdG9ycy4KClRoZSBjb25uZWN0b3Jz
IGRvIGdldCByZWdpc3RlcmVkIGEgYml0IGxhdGVyIHdoZW4gZHJtX2Rldl9yZWdpc3RlcigpIGNh
bGxzCmRybV9tb2Rlc2V0X3JlZ2lzdGVyX2FsbCgpCgpUaGlzIHN1YnRsZSBjaGFuZ2UgaW4gb3Jk
ZXJpbmcgaXMgd2h5IEkgc3RhcnRlZCBwb2tpbmcgYXQgZHJtX2Nvbm5lY3Rvcl9yZWdpc3Rlcgph
bmQgdGhlIGZ1bmN0aW9ucyBpdCBjYWxscyBhbmQgaG93IEkgZm91bmQgb3V0IHRoYXQgY29tbWVu
dGluZyBvdXQgdGhlCmRybV9zeXNmc19ob3RwbHVnX2V2ZW50KCkgY2FsbCByZXByb2R1Y2VzIHRo
ZSBiZWhhdmlvciBvbiBvbGRlciB3b3JraW5nIGtlcm5lbHMuCgpJIGhhdmUgdHJpZWQgcmVwbGFj
aW5nIHRoaXMgd2l0aCBhIHNsZWVwIGNhbGwgdG8gcnVsZSBvdXQgdGltaW5nIGlzc3VlcywgdGhh
dApkb2VzIG5vdCBoZWxwLgoKT3RoZXIgdGhpbmdzIEkgaGF2ZSBjaGVja2VkIGlzIHRoYXQgb25l
IGNvbW1pdCBiZWZvcmUgdGhlIHRyb3VibGVzb21lIGNvbW1pdApub3V2ZWF1X2Nvbm5lY3Rvcl9o
b3RwbHVnKCkgcHJvcGVybHkgcnVuczsgYW5kIHRoYXQgYWZ0ZXIgdGhlIHRyb3VibGVzb21lCmNv
bW1pdCB3ZSBzdGlsbCBwcm9wZXJseSBjYWxsIG52aWZfbm90aWZ5X2dldCgmY29ubi0+aHBkKTsK
ClNvIG5vdyBJJ20gYWxsIG91dCBvZiBpZGVhcyBob3cgdG8gZGVidWcgdGhpcyBmdXJ0aGVyIGFu
ZCBJIGhvcGUgc29tZW9uZSBvbgp0aGUgbGlzdCBoYXMgYW4gaWRlYSBob3cgdG8gZGVidWcgdGhp
cy4KClJlZ2FyZHMsCgpIYW5zCgpwLnMuCgpJJ3ZlIGFsc28gdHJpZWQgYSBsaXR0bGUgaGFjayBs
aWtlIHRoaXM6CgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL25vdXZlYXUvbm91dmVhdV9k
cm0uYyBiL2RyaXZlcnMvZ3B1L2RybS9ub3V2ZWF1L25vdXZlYXVfZHJtLmMKaW5kZXggMmIyYmFm
NmUwZTBkLi5lZmM3YmE2NjZiMWIgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9ub3V2ZWF1
L25vdXZlYXVfZHJtLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL25vdXZlYXUvbm91dmVhdV9kcm0u
YwpAQCAtNDU5LDcgKzQ1OSw3IEBAIG5vdXZlYXVfYWNjZWxfaW5pdChzdHJ1Y3Qgbm91dmVhdV9k
cm0gKmRybSkKICB9CgogIHN0YXRpYyBpbnQKLW5vdXZlYXVfZHJtX2RldmljZV9pbml0KHN0cnVj
dCBkcm1fZGV2aWNlICpkZXYpCitub3V2ZWF1X2RybV9sb2FkKHN0cnVjdCBkcm1fZGV2aWNlICpk
ZXYsIHVuc2lnbmVkIGxvbmcgZmxhZ3MpCiAgewogIAlzdHJ1Y3Qgbm91dmVhdV9kcm0gKmRybTsK
ICAJaW50IHJldDsKQEAgLTY0Nyw5ICs2NDcsOSBAQCBzdGF0aWMgaW50IG5vdXZlYXVfZHJtX3By
b2JlKHN0cnVjdCBwY2lfZGV2ICpwZGV2LAogIAlkcm1fZGV2LT5wZGV2ID0gcGRldjsKICAJcGNp
X3NldF9kcnZkYXRhKHBkZXYsIGRybV9kZXYpOwoKLQlyZXQgPSBub3V2ZWF1X2RybV9kZXZpY2Vf
aW5pdChkcm1fZGV2KTsKKy8qCXJldCA9IG5vdXZlYXVfZHJtX2RldmljZV9pbml0KGRybV9kZXYp
OwogIAlpZiAocmV0KQotCQlnb3RvIGZhaWxfcGNpOworCQlnb3RvIGZhaWxfcGNpOyAqLwoKICAJ
cmV0ID0gZHJtX2Rldl9yZWdpc3Rlcihkcm1fZGV2LCBwZW50LT5kcml2ZXJfZGF0YSk7CiAgCWlm
IChyZXQpCkBAIC0xMDUxLDYgKzEwNTEsNyBAQCBkcml2ZXJfc3R1YiA9IHsKICAJCURSSVZFUl9H
RU0gfCBEUklWRVJfTU9ERVNFVCB8IERSSVZFUl9QUklNRSB8IERSSVZFUl9SRU5ERVIgfAogIAkJ
RFJJVkVSX0tNU19MRUdBQ1lfQ09OVEVYVCwKCisJLmxvYWQgPSBub3V2ZWF1X2RybV9sb2FkLAog
IAkub3BlbiA9IG5vdXZlYXVfZHJtX29wZW4sCiAgCS5wb3N0Y2xvc2UgPSBub3V2ZWF1X2RybV9w
b3N0Y2xvc2UsCiAgCS5sYXN0Y2xvc2UgPSBub3V2ZWF1X3ZnYV9sYXN0Y2xvc2UsCgpBbmQgd2l0
aCA0LjIwIHRoYXQgZml4ZXMgdGhpbmdzLCBvbiA1LjQgSSBnZXQgYW4gb29wcyB3aXRoIHRoaXMg
aGFjawp3aGljaCBJJ3ZlIG5vdCBkZWJ1Z2dlZCBmdXJ0aGVyIHNpbmNlIHRoaXMgaXMgbm90IGEg
cHJvcGVyIHNvbHV0aW9uLgoKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fCk5vdXZlYXUgbWFpbGluZyBsaXN0Ck5vdXZlYXVAbGlzdHMuZnJlZWRlc2t0b3Au
b3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vbm91dmVh
dQ==
