Return-Path: <nouveau-bounces@lists.freedesktop.org>
X-Original-To: lists+nouveau@lfdr.de
Delivered-To: lists+nouveau@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id CF8D6B1C6B
	for <lists+nouveau@lfdr.de>; Fri, 13 Sep 2019 13:33:20 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 889226EF22;
	Fri, 13 Sep 2019 11:33:18 +0000 (UTC)
X-Original-To: nouveau@lists.freedesktop.org
Delivered-To: nouveau@lists.freedesktop.org
Received: from mx1.redhat.com (mx1.redhat.com [209.132.183.28])
 by gabe.freedesktop.org (Postfix) with ESMTPS id DE4996EF20
 for <nouveau@lists.freedesktop.org>; Fri, 13 Sep 2019 11:33:15 +0000 (UTC)
Received: from mail-wr1-f69.google.com (mail-wr1-f69.google.com
 [209.85.221.69])
 (using TLSv1.2 with cipher ECDHE-RSA-AES128-GCM-SHA256 (128/128 bits))
 (No client certificate requested)
 by mx1.redhat.com (Postfix) with ESMTPS id 3D81E88304
 for <nouveau@lists.freedesktop.org>; Fri, 13 Sep 2019 11:33:15 +0000 (UTC)
Received: by mail-wr1-f69.google.com with SMTP id h6so11107233wrh.6
 for <nouveau@lists.freedesktop.org>; Fri, 13 Sep 2019 04:33:15 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=TYXlrc+G4k8FIPomiVi/rvBYGhMeTqatpzYhgKjcFfA=;
 b=mwFg50NEeHJLm+cZebCWzZcgzJhM4wq1HZF8fuRrJ0Eb5lecW6pWDkQtStTWvfCn/s
 wT1jOAsGmc+C7Zwni8DkvClc5Yl4RGDhNgDAUzZnLTEyJAj59tel4rrMNwbkqzbsCYd2
 0o1u9dWZZ3FWEtvIdplFwQY/WS3pIMG1Ss622Xi09eW3mYN+FJfFqDoH07R6ZmjSoBiG
 /UpSR1paiUxKR7TfEgFHYV/JhvLKxbBKDWxhyOI7F8MzkCMvJ89kecTToMV2UKHyq+/b
 7rXdfIKA0CzTaM0LXelygzziCYtd9YbMIXqtPVkTlong9oju2MJ9q7k5sNjEP1BEr5WN
 HgBw==
X-Gm-Message-State: APjAAAV3Voc+054pj63D1vYDx6ENH5AH8JTLEEoo8nKNI6JmzeykxXnp
 lF4u3iSLKecU4iXOowhadAv8EIASS3XbGMbkzSK6UhVl88Lba1kQQdU5AArkYr9q4DNccVghwwF
 BClkkPANKg879XL+rqeYDWNYkYA==
X-Received: by 2002:a05:600c:2305:: with SMTP id
 5mr3174178wmo.154.1568374393705; 
 Fri, 13 Sep 2019 04:33:13 -0700 (PDT)
X-Google-Smtp-Source: APXvYqxlA/hc+XOogghEiIj9XbzrnNuBZokhHZr/oSH7jVM9/Fz0M0VNAQf+XHk6bM6nv+k772+WDg==
X-Received: by 2002:a05:600c:2305:: with SMTP id
 5mr3174164wmo.154.1568374393488; 
 Fri, 13 Sep 2019 04:33:13 -0700 (PDT)
Received: from kherbst.pingu.com (nat-pool-brq-t.redhat.com. [213.175.37.10])
 by smtp.gmail.com with ESMTPSA id
 r15sm2262769wmh.42.2019.09.13.04.33.12
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Fri, 13 Sep 2019 04:33:12 -0700 (PDT)
From: Karol Herbst <kherbst@redhat.com>
To: nouveau@lists.freedesktop.org
Date: Fri, 13 Sep 2019 13:33:05 +0200
Message-Id: <20190913113306.20972-4-kherbst@redhat.com>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20190913113306.20972-1-kherbst@redhat.com>
References: <20190913113306.20972-1-kherbst@redhat.com>
MIME-Version: 1.0
Subject: [Nouveau] [PATCH v4 3/4] pci: set the pcie link speed to 8.0 when
 suspending
X-BeenThere: nouveau@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Nouveau development list <nouveau.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/nouveau>,
 <mailto:nouveau-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/nouveau>
List-Post: <mailto:nouveau@lists.freedesktop.org>
List-Help: <mailto:nouveau-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/nouveau>,
 <mailto:nouveau-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: nouveau-bounces@lists.freedesktop.org
Sender: "Nouveau" <nouveau-bounces@lists.freedesktop.org>

QXBwZXJhbnRseSB0aGluZ3MgZ28gc291dGggaWYgd2Ugc3VzcGVuZCB0aGUgZGV2aWNlIHdpdGgg
YSBQQ0llIGxpbmsgc3BlZWQKc2V0IHRvIDIuNS4gRml4ZXMgcnVudGltZSBzdXNwZW5kIG9uIG15
IGdwMTA3LgoKVGhpcyBhbGwgbG9va3MgbGlrZSBzb21lIGJ1ZyBpbnNpZGUgdGhlIHBjaSBzdWJz
eXN0ZW0gYW5kIEkgd291bGQgcHJlZmVyIGEKZml4IHRoZXJlIGluc3RlYWQgb2Ygbm91dmVhdSwg
YnV0IG1heWJlIHRoZXJlIGlzIG5vIHJlYWwgbmljZSB3YXkgb2YgZG9pbmcKdGhhdCBvdXRzaWRl
IG9mIGRyaXZlcnM/Cgp2Mjogc3F1YXNoZWQgdG9nZXRoZXIgcGF0Y2ggNCBhbmQgNQp2Mzogb25s
eSByZXN0b3JlIHBjaWUgc3BlZWQgb24gbWFjaGluZXMgd2l0aCBydW5wbQogICAgYWRkIE52UnVu
cG1Xb3JrYXJvdW5kIGNvbmZpZyBvcHRpb24gdG8gZGlzYWJsZSB0aGUgd29ya2Fyb3VuZAp2NDog
b25seSBydW4gdGhlIGNvZGUgb24gc3VzcGVuZAogICAgYWx3YXlzIHB1dCB0aGUgY2FyZCBpbnRv
IDguMCBtb2RlLCBub3Qgd2hhdCBub3V2ZWF1IGRldGVjdGVkIG9uIGxvYWQKClNpZ25lZC1vZmYt
Ynk6IEthcm9sIEhlcmJzdCA8a2hlcmJzdEByZWRoYXQuY29tPgpSZXZpZXdlZC1ieTogTHl1ZGUg
UGF1bCA8bHl1ZGVAcmVkaGF0LmNvbT4gKHYyKQotLS0KIGRybS9ub3V2ZWF1L2luY2x1ZGUvbnZr
bS9jb3JlL2RldmljZS5oIHwgIDIgKysKIGRybS9ub3V2ZWF1L2luY2x1ZGUvbnZrbS9zdWJkZXYv
cGNpLmggIHwgIDMgKystCiBkcm0vbm91dmVhdS9ub3V2ZWF1X2RybS5jICAgICAgICAgICAgICB8
ICAxICsKIGRybS9ub3V2ZWF1L252a20vc3ViZGV2L2Nsay9iYXNlLmMgICAgIHwgIDIgKy0KIGRy
bS9ub3V2ZWF1L252a20vc3ViZGV2L3BjaS9iYXNlLmMgICAgIHwgIDIgKysKIGRybS9ub3V2ZWF1
L252a20vc3ViZGV2L3BjaS9wY2llLmMgICAgIHwgMjcgKysrKysrKysrKysrKysrKysrKysrKy0t
LS0KIGRybS9ub3V2ZWF1L252a20vc3ViZGV2L3BjaS9wcml2LmggICAgIHwgIDEgKwogNyBmaWxl
cyBjaGFuZ2VkLCAzMiBpbnNlcnRpb25zKCspLCA2IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBh
L2RybS9ub3V2ZWF1L2luY2x1ZGUvbnZrbS9jb3JlL2RldmljZS5oIGIvZHJtL25vdXZlYXUvaW5j
bHVkZS9udmttL2NvcmUvZGV2aWNlLmgKaW5kZXggNmQ1NWNkMDQ3Li40ZmIzZjk3MmYgMTAwNjQ0
Ci0tLSBhL2RybS9ub3V2ZWF1L2luY2x1ZGUvbnZrbS9jb3JlL2RldmljZS5oCisrKyBiL2RybS9u
b3V2ZWF1L2luY2x1ZGUvbnZrbS9jb3JlL2RldmljZS5oCkBAIC0xMjUsNiArMTI1LDggQEAgc3Ry
dWN0IG52a21fZGV2aWNlIHsKIAl1OCAgY2hpcHJldjsKIAl1MzIgY3J5c3RhbDsKIAorCWJvb2wg
aGFzX3J1bnBtOworCiAJc3RydWN0IHsKIAkJc3RydWN0IG5vdGlmaWVyX2Jsb2NrIG5iOwogCX0g
YWNwaTsKZGlmZiAtLWdpdCBhL2RybS9ub3V2ZWF1L2luY2x1ZGUvbnZrbS9zdWJkZXYvcGNpLmgg
Yi9kcm0vbm91dmVhdS9pbmNsdWRlL252a20vc3ViZGV2L3BjaS5oCmluZGV4IGIyOTEwMWU0OC4u
NzI0NTUxM2Q5IDEwMDY0NAotLS0gYS9kcm0vbm91dmVhdS9pbmNsdWRlL252a20vc3ViZGV2L3Bj
aS5oCisrKyBiL2RybS9ub3V2ZWF1L2luY2x1ZGUvbnZrbS9zdWJkZXYvcGNpLmgKQEAgLTUyLDYg
KzUyLDcgQEAgaW50IGdrMTA0X3BjaV9uZXcoc3RydWN0IG52a21fZGV2aWNlICosIGludCwgc3Ry
dWN0IG52a21fcGNpICoqKTsKIGludCBncDEwMF9wY2lfbmV3KHN0cnVjdCBudmttX2RldmljZSAq
LCBpbnQsIHN0cnVjdCBudmttX3BjaSAqKik7CiAKIC8qIHBjaWUgZnVuY3Rpb25zICovCi1pbnQg
bnZrbV9wY2llX3NldF9saW5rKHN0cnVjdCBudmttX3BjaSAqLCBlbnVtIG52a21fcGNpZV9zcGVl
ZCwgdTggd2lkdGgpOworaW50IG52a21fcGNpZV9zZXRfbGluayhzdHJ1Y3QgbnZrbV9wY2kgKiwg
ZW51bSBudmttX3BjaWVfc3BlZWQsIHU4IHdpZHRoLAorCQkgICAgICAgYm9vbCBzYXZlKTsKIGVu
dW0gbnZrbV9wY2llX3NwZWVkIG52a21fcGNpZV9nZXRfc3BlZWQoc3RydWN0IG52a21fcGNpICop
OwogI2VuZGlmCmRpZmYgLS1naXQgYS9kcm0vbm91dmVhdS9ub3V2ZWF1X2RybS5jIGIvZHJtL25v
dXZlYXUvbm91dmVhdV9kcm0uYwppbmRleCAzZDMyYWZlOGEuLjc4ZDU1YzUyNSAxMDA2NDQKLS0t
IGEvZHJtL25vdXZlYXUvbm91dmVhdV9kcm0uYworKysgYi9kcm0vbm91dmVhdS9ub3V2ZWF1X2Ry
bS5jCkBAIC02NzYsNiArNjc2LDcgQEAgc3RhdGljIGludCBub3V2ZWF1X2RybV9wcm9iZShzdHJ1
Y3QgcGNpX2RldiAqcGRldiwKIAogCWlmIChub3V2ZWF1X2F0b21pYykKIAkJZHJpdmVyX3BjaS5k
cml2ZXJfZmVhdHVyZXMgfD0gRFJJVkVSX0FUT01JQzsKKwlkZXZpY2UtPmhhc19ydW5wbSA9IG5v
dXZlYXVfcG1vcHNfcnVudGltZSgpOwogCiAJZHJtX2RldiA9IGRybV9kZXZfYWxsb2MoJmRyaXZl
cl9wY2ksICZwZGV2LT5kZXYpOwogCWlmIChJU19FUlIoZHJtX2RldikpIHsKZGlmZiAtLWdpdCBh
L2RybS9ub3V2ZWF1L252a20vc3ViZGV2L2Nsay9iYXNlLmMgYi9kcm0vbm91dmVhdS9udmttL3N1
YmRldi9jbGsvYmFzZS5jCmluZGV4IGJhNmE4NjhkNC4uZTMwZTc3NDUzIDEwMDY0NAotLS0gYS9k
cm0vbm91dmVhdS9udmttL3N1YmRldi9jbGsvYmFzZS5jCisrKyBiL2RybS9ub3V2ZWF1L252a20v
c3ViZGV2L2Nsay9iYXNlLmMKQEAgLTI3Nyw3ICsyNzcsNyBAQCBudmttX3BzdGF0ZV9wcm9nKHN0
cnVjdCBudmttX2NsayAqY2xrLCBpbnQgcHN0YXRlaSkKIAludmttX2RlYnVnKHN1YmRldiwgInNl
dHRpbmcgcGVyZm9ybWFuY2Ugc3RhdGUgJWRcbiIsIHBzdGF0ZWkpOwogCWNsay0+cHN0YXRlID0g
cHN0YXRlaTsKIAotCW52a21fcGNpZV9zZXRfbGluayhwY2ksIHBzdGF0ZS0+cGNpZV9zcGVlZCwg
cHN0YXRlLT5wY2llX3dpZHRoKTsKKwludmttX3BjaWVfc2V0X2xpbmsocGNpLCBwc3RhdGUtPnBj
aWVfc3BlZWQsIHBzdGF0ZS0+cGNpZV93aWR0aCwgdHJ1ZSk7CiAKIAlpZiAoZmIgJiYgZmItPnJh
bSAmJiBmYi0+cmFtLT5mdW5jLT5jYWxjKSB7CiAJCXN0cnVjdCBudmttX3JhbSAqcmFtID0gZmIt
PnJhbTsKZGlmZiAtLWdpdCBhL2RybS9ub3V2ZWF1L252a20vc3ViZGV2L3BjaS9iYXNlLmMgYi9k
cm0vbm91dmVhdS9udmttL3N1YmRldi9wY2kvYmFzZS5jCmluZGV4IGVlMjQzMWE3OC4uYzliNjBl
Zjc2IDEwMDY0NAotLS0gYS9kcm0vbm91dmVhdS9udmttL3N1YmRldi9wY2kvYmFzZS5jCisrKyBi
L2RybS9ub3V2ZWF1L252a20vc3ViZGV2L3BjaS9iYXNlLmMKQEAgLTkwLDYgKzkwLDggQEAgbnZr
bV9wY2lfZmluaShzdHJ1Y3QgbnZrbV9zdWJkZXYgKnN1YmRldiwgYm9vbCBzdXNwZW5kKQogCiAJ
aWYgKHBjaS0+YWdwLmJyaWRnZSkKIAkJbnZrbV9hZ3BfZmluaShwY2kpOworCWVsc2UgaWYgKHBj
aV9pc19wY2llKHBjaS0+cGRldikpCisJCW52a21fcGNpZV9maW5pKHBjaSwgc3VzcGVuZCk7CiAK
IAlyZXR1cm4gMDsKIH0KZGlmZiAtLWdpdCBhL2RybS9ub3V2ZWF1L252a20vc3ViZGV2L3BjaS9w
Y2llLmMgYi9kcm0vbm91dmVhdS9udmttL3N1YmRldi9wY2kvcGNpZS5jCmluZGV4IGI0MjAzZmYx
YS4uNWNhYjRhMjQwIDEwMDY0NAotLS0gYS9kcm0vbm91dmVhdS9udmttL3N1YmRldi9wY2kvcGNp
ZS5jCisrKyBiL2RybS9ub3V2ZWF1L252a20vc3ViZGV2L3BjaS9wY2llLmMKQEAgLTIzLDYgKzIz
LDggQEAKICAqLwogI2luY2x1ZGUgInByaXYuaCIKIAorI2luY2x1ZGUgPGNvcmUvb3B0aW9uLmg+
CisKIHN0YXRpYyBjaGFyICpudmttX3BjaWVfc3BlZWRzW10gPSB7CiAJIjIuNUdUL3MiLAogCSI1
LjBHVC9zIiwKQEAgLTEwNiwxMSArMTA4LDI1IEBAIG52a21fcGNpZV9pbml0KHN0cnVjdCBudmtt
X3BjaSAqcGNpKQogCQlwY2ktPmZ1bmMtPnBjaWUuaW5pdChwY2kpOwogCiAJaWYgKHBjaS0+cGNp
ZS5zcGVlZCAhPSAtMSkKLQkJbnZrbV9wY2llX3NldF9saW5rKHBjaSwgcGNpLT5wY2llLnNwZWVk
LCBwY2ktPnBjaWUud2lkdGgpOworCQludmttX3BjaWVfc2V0X2xpbmsocGNpLCBwY2ktPnBjaWUu
c3BlZWQsCisJCQkJICAgcGNpLT5wY2llLndpZHRoLCBmYWxzZSk7CiAKIAlyZXR1cm4gMDsKIH0K
IAoraW50CitudmttX3BjaWVfZmluaShzdHJ1Y3QgbnZrbV9wY2kgKnBjaSwgYm9vbCBzdXNwZW5k
KQoreworCXN0cnVjdCBudmttX2RldmljZSAqZGV2aWNlID0gcGNpLT5zdWJkZXYuZGV2aWNlOwor
CWlmICghZGV2aWNlLT5oYXNfcnVucG0gfHwgIXN1c3BlbmQpCisJCXJldHVybiAwOworCisJaWYg
KCFudmttX2Jvb2xvcHQoZGV2aWNlLT5jZmdvcHQsICJOdlJ1bnBtV29ya2Fyb3VuZCIsIHRydWUp
KQorCQlyZXR1cm4gMDsKKworCXJldHVybiBudmttX3BjaWVfc2V0X2xpbmsocGNpLCBOVktNX1BD
SUVfU1BFRURfOF8wLCAxNiwgZmFsc2UpOworfQorCiB2b2lkCiBudmttX3BjaWVfZm9yY2VfYXNw
bV9vZmYoc3RydWN0IG52a21fcGNpICpwY2ksIGJvb2wgc3RhdHVzKQogewpAQCAtMTIwLDcgKzEz
Niw4IEBAIG52a21fcGNpZV9mb3JjZV9hc3BtX29mZihzdHJ1Y3QgbnZrbV9wY2kgKnBjaSwgYm9v
bCBzdGF0dXMpCiB9CiAKIGludAotbnZrbV9wY2llX3NldF9saW5rKHN0cnVjdCBudmttX3BjaSAq
cGNpLCBlbnVtIG52a21fcGNpZV9zcGVlZCBzcGVlZCwgdTggd2lkdGgpCitudmttX3BjaWVfc2V0
X2xpbmsoc3RydWN0IG52a21fcGNpICpwY2ksIGVudW0gbnZrbV9wY2llX3NwZWVkIHNwZWVkLCB1
OCB3aWR0aCwKKyAgICAgICAgICAgICAgICAgICBib29sIHNhdmUpCiB7CiAJc3RydWN0IG52a21f
c3ViZGV2ICpzdWJkZXYgPSAmcGNpLT5zdWJkZXY7CiAJZW51bSBudmttX3BjaWVfc3BlZWQgY3Vy
X3NwZWVkLCBtYXhfc3BlZWQ7CkBAIC0xNTQsOCArMTcxLDEwIEBAIG52a21fcGNpZV9zZXRfbGlu
ayhzdHJ1Y3QgbnZrbV9wY2kgKnBjaSwgZW51bSBudmttX3BjaWVfc3BlZWQgc3BlZWQsIHU4IHdp
ZHRoKQogCQlzcGVlZCA9IG1heF9zcGVlZDsKIAl9CiAKLQlwY2ktPnBjaWUuc3BlZWQgPSBzcGVl
ZDsKLQlwY2ktPnBjaWUud2lkdGggPSB3aWR0aDsKKwlpZiAoc2F2ZSkgeworCQlwY2ktPnBjaWUu
c3BlZWQgPSBzcGVlZDsKKwkJcGNpLT5wY2llLndpZHRoID0gd2lkdGg7CisJfQogCiAJaWYgKHNw
ZWVkID09IGN1cl9zcGVlZCkgewogCQludmttX2RlYnVnKHN1YmRldiwgInJlcXVlc3RlZCBtYXRj
aGVzIGN1cnJlbnQgc3BlZWRcbiIpOwpkaWZmIC0tZ2l0IGEvZHJtL25vdXZlYXUvbnZrbS9zdWJk
ZXYvcGNpL3ByaXYuaCBiL2RybS9ub3V2ZWF1L252a20vc3ViZGV2L3BjaS9wcml2LmgKaW5kZXgg
ODJjNzhiZWZhLi42YmVhMzdjMTUgMTAwNjQ0Ci0tLSBhL2RybS9ub3V2ZWF1L252a20vc3ViZGV2
L3BjaS9wcml2LmgKKysrIGIvZHJtL25vdXZlYXUvbnZrbS9zdWJkZXYvcGNpL3ByaXYuaApAQCAt
NjMsNCArNjMsNSBAQCBpbnQgZ2sxMDRfcGNpZV92ZXJzaW9uX3N1cHBvcnRlZChzdHJ1Y3QgbnZr
bV9wY2kgKik7CiAKIGludCBudmttX3BjaWVfb25laW5pdChzdHJ1Y3QgbnZrbV9wY2kgKik7CiBp
bnQgbnZrbV9wY2llX2luaXQoc3RydWN0IG52a21fcGNpICopOworaW50IG52a21fcGNpZV9maW5p
KHN0cnVjdCBudmttX3BjaSAqLCBib29sIHN1c3BlbmQpOwogI2VuZGlmCi0tIAoyLjIxLjAKCl9f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCk5vdXZlYXUgbWFp
bGluZyBsaXN0Ck5vdXZlYXVAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJl
ZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vbm91dmVhdQ==
