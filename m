Return-Path: <nouveau-bounces@lists.freedesktop.org>
X-Original-To: lists+nouveau@lfdr.de
Delivered-To: lists+nouveau@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id E24E15B4A9
	for <lists+nouveau@lfdr.de>; Mon,  1 Jul 2019 08:20:43 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 5A79289EFF;
	Mon,  1 Jul 2019 06:20:42 +0000 (UTC)
X-Original-To: nouveau@lists.freedesktop.org
Delivered-To: nouveau@lists.freedesktop.org
Received: from bombadil.infradead.org (bombadil.infradead.org
 [IPv6:2607:7c80:54:e::133])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 594E389ECD;
 Mon,  1 Jul 2019 06:20:41 +0000 (UTC)
Received: from [46.140.178.35] (helo=localhost)
 by bombadil.infradead.org with esmtpsa (Exim 4.92 #3 (Red Hat Linux))
 id 1hhpg6-0002vW-0H; Mon, 01 Jul 2019 06:20:38 +0000
From: Christoph Hellwig <hch@lst.de>
To: Dan Williams <dan.j.williams@intel.com>,
 =?UTF-8?q?J=C3=A9r=C3=B4me=20Glisse?= <jglisse@redhat.com>,
 Jason Gunthorpe <jgg@mellanox.com>, Ben Skeggs <bskeggs@redhat.com>
Date: Mon,  1 Jul 2019 08:20:05 +0200
Message-Id: <20190701062020.19239-8-hch@lst.de>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190701062020.19239-1-hch@lst.de>
References: <20190701062020.19239-1-hch@lst.de>
MIME-Version: 1.0
X-SRS-Rewrite: SMTP reverse-path rewritten from <hch@infradead.org> by
 bombadil.infradead.org. See http://www.infradead.org/rpr.html
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt;
 c=relaxed/relaxed; 
 d=infradead.org; s=bombadil.20170209; h=Content-Transfer-Encoding:
 MIME-Version:References:In-Reply-To:Message-Id:Date:Subject:Cc:To:From:Sender
 :Reply-To:Content-Type:Content-ID:Content-Description:Resent-Date:Resent-From
 :Resent-Sender:Resent-To:Resent-Cc:Resent-Message-ID:List-Id:List-Help:
 List-Unsubscribe:List-Subscribe:List-Post:List-Owner:List-Archive;
 bh=WF4tHB/Skt9G3b9J2cGNsUS+Db4fSie+CUUuGe98tR0=; b=pvfk1jdkUzEbDkGH+OR9rAHyIe
 kR8atU5kSv/EQToxLIjdsRba/jDPvJY79AkV5c9POhc8OEOnkOYGx3sDbU9BQX4OTpjP1OiMwNB8G
 Mr3B1wZ6mvB0ReFKDK9kAyOrFR3cFOU1pOOJAA2HuLhksS4VANVCw0zg1mFE13Q21vRUPTpXy0agl
 klOHn1A4qhv0abiLTq348XVdq3wl/B8i7Pzq6GmWavPxglIVnsTMy1yx8Hd9yBWwpnQDb2cCQUB5/
 Of51BOJ0vhGHXiGXtGHuj8RzNUSqCPrQXBAMst2TA75JLvCwMCyYDnCASQb0SyEWfjXv+/n3G60Re
 6sNUsc+Q==;
Subject: [Nouveau] [PATCH 07/22] mm/hmm: Use hmm_mirror not mm as an
 argument for hmm_range_register
X-BeenThere: nouveau@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Nouveau development list <nouveau.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/nouveau>,
 <mailto:nouveau-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/nouveau>
List-Post: <mailto:nouveau@lists.freedesktop.org>
List-Help: <mailto:nouveau-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/nouveau>,
 <mailto:nouveau-request@lists.freedesktop.org?subject=subscribe>
Cc: Philip Yang <Philip.Yang@amd.com>, Ralph Campbell <rcampbell@nvidia.com>,
 linux-nvdimm@lists.01.org, linux-pci@vger.kernel.org,
 linux-kernel@vger.kernel.org, dri-devel@lists.freedesktop.org,
 linux-mm@kvack.org, nouveau@lists.freedesktop.org,
 Ira Weiny <ira.weiny@intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: nouveau-bounces@lists.freedesktop.org
Sender: "Nouveau" <nouveau-bounces@lists.freedesktop.org>

RnJvbTogSmFzb24gR3VudGhvcnBlIDxqZ2dAbWVsbGFub3guY29tPgoKUmFscGggb2JzZXJ2ZXMg
dGhhdCBobW1fcmFuZ2VfcmVnaXN0ZXIoKSBjYW4gb25seSBiZSBjYWxsZWQgYnkgYSBkcml2ZXIK
d2hpbGUgYSBtaXJyb3IgaXMgcmVnaXN0ZXJlZC4gTWFrZSB0aGlzIGNsZWFyIGluIHRoZSBBUEkg
YnkgcGFzc2luZyBpbiB0aGUKbWlycm9yIHN0cnVjdHVyZSBhcyBhIHBhcmFtZXRlci4KClRoaXMg
YWxzbyBzaW1wbGlmaWVzIHVuZGVyc3RhbmRpbmcgdGhlIGxpZmV0aW1lIG1vZGVsIGZvciBzdHJ1
Y3QgaG1tLCBhcwp0aGUgaG1tIHBvaW50ZXIgbXVzdCBiZSB2YWxpZCBhcyBwYXJ0IG9mIGEgcmVn
aXN0ZXJlZCBtaXJyb3Igc28gYWxsIHdlCm5lZWQgaW4gaG1tX3JlZ2lzdGVyX3JhbmdlKCkgaXMg
YSBzaW1wbGUga3JlZl9nZXQuCgpTdWdnZXN0ZWQtYnk6IFJhbHBoIENhbXBiZWxsIDxyY2FtcGJl
bGxAbnZpZGlhLmNvbT4KU2lnbmVkLW9mZi1ieTogSmFzb24gR3VudGhvcnBlIDxqZ2dAbWVsbGFu
b3guY29tPgpSZXZpZXdlZC1ieTogSm9obiBIdWJiYXJkIDxqaHViYmFyZEBudmlkaWEuY29tPgpS
ZXZpZXdlZC1ieTogUmFscGggQ2FtcGJlbGwgPHJjYW1wYmVsbEBudmlkaWEuY29tPgpSZXZpZXdl
ZC1ieTogSXJhIFdlaW55IDxpcmEud2VpbnlAaW50ZWwuY29tPgpSZXZpZXdlZC1ieTogQ2hyaXN0
b3BoIEhlbGx3aWcgPGhjaEBsc3QuZGU+ClRlc3RlZC1ieTogUGhpbGlwIFlhbmcgPFBoaWxpcC5Z
YW5nQGFtZC5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL25vdXZlYXUvbm91dmVhdV9zdm0uYyB8
ICAyICstCiBpbmNsdWRlL2xpbnV4L2htbS5oICAgICAgICAgICAgICAgICAgIHwgIDcgKysrKy0t
LQogbW0vaG1tLmMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IDEzICsrKystLS0tLS0t
LS0KIDMgZmlsZXMgY2hhbmdlZCwgOSBpbnNlcnRpb25zKCspLCAxMyBkZWxldGlvbnMoLSkKCmRp
ZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vbm91dmVhdS9ub3V2ZWF1X3N2bS5jIGIvZHJpdmVy
cy9ncHUvZHJtL25vdXZlYXUvbm91dmVhdV9zdm0uYwppbmRleCA5M2VkNDNjNDEzZjAuLjhjOTIz
NzRhZmNmMiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL25vdXZlYXUvbm91dmVhdV9zdm0u
YworKysgYi9kcml2ZXJzL2dwdS9kcm0vbm91dmVhdS9ub3V2ZWF1X3N2bS5jCkBAIC02NDksNyAr
NjQ5LDcgQEAgbm91dmVhdV9zdm1fZmF1bHQoc3RydWN0IG52aWZfbm90aWZ5ICpub3RpZnkpCiAJ
CXJhbmdlLnZhbHVlcyA9IG5vdXZlYXVfc3ZtX3Bmbl92YWx1ZXM7CiAJCXJhbmdlLnBmbl9zaGlm
dCA9IE5WSUZfVk1NX1BGTk1BUF9WMF9BRERSX1NISUZUOwogYWdhaW46Ci0JCXJldCA9IGhtbV92
bWFfZmF1bHQoJnJhbmdlLCB0cnVlKTsKKwkJcmV0ID0gaG1tX3ZtYV9mYXVsdCgmc3ZtbS0+bWly
cm9yLCAmcmFuZ2UsIHRydWUpOwogCQlpZiAocmV0ID09IDApIHsKIAkJCW11dGV4X2xvY2soJnN2
bW0tPm11dGV4KTsKIAkJCWlmICghaG1tX3ZtYV9yYW5nZV9kb25lKCZyYW5nZSkpIHsKZGlmZiAt
LWdpdCBhL2luY2x1ZGUvbGludXgvaG1tLmggYi9pbmNsdWRlL2xpbnV4L2htbS5oCmluZGV4IGNi
MDFjZjFmYTNjMC4uMWZiYTY5NzlhZGY0IDEwMDY0NAotLS0gYS9pbmNsdWRlL2xpbnV4L2htbS5o
CisrKyBiL2luY2x1ZGUvbGludXgvaG1tLmgKQEAgLTQ5Niw3ICs0OTYsNyBAQCBzdGF0aWMgaW5s
aW5lIGJvb2wgaG1tX21pcnJvcl9tbV9pc19hbGl2ZShzdHJ1Y3QgaG1tX21pcnJvciAqbWlycm9y
KQogICogUGxlYXNlIHNlZSBEb2N1bWVudGF0aW9uL3ZtL2htbS5yc3QgZm9yIGhvdyB0byB1c2Ug
dGhlIHJhbmdlIEFQSS4KICAqLwogaW50IGhtbV9yYW5nZV9yZWdpc3RlcihzdHJ1Y3QgaG1tX3Jh
bmdlICpyYW5nZSwKLQkJICAgICAgIHN0cnVjdCBtbV9zdHJ1Y3QgKm1tLAorCQkgICAgICAgc3Ry
dWN0IGhtbV9taXJyb3IgKm1pcnJvciwKIAkJICAgICAgIHVuc2lnbmVkIGxvbmcgc3RhcnQsCiAJ
CSAgICAgICB1bnNpZ25lZCBsb25nIGVuZCwKIAkJICAgICAgIHVuc2lnbmVkIHBhZ2Vfc2hpZnQp
OwpAQCAtNTMyLDcgKzUzMiw4IEBAIHN0YXRpYyBpbmxpbmUgYm9vbCBobW1fdm1hX3JhbmdlX2Rv
bmUoc3RydWN0IGhtbV9yYW5nZSAqcmFuZ2UpCiB9CiAKIC8qIFRoaXMgaXMgYSB0ZW1wb3Jhcnkg
aGVscGVyIHRvIGF2b2lkIG1lcmdlIGNvbmZsaWN0IGJldHdlZW4gdHJlZXMuICovCi1zdGF0aWMg
aW5saW5lIGludCBobW1fdm1hX2ZhdWx0KHN0cnVjdCBobW1fcmFuZ2UgKnJhbmdlLCBib29sIGJs
b2NrKQorc3RhdGljIGlubGluZSBpbnQgaG1tX3ZtYV9mYXVsdChzdHJ1Y3QgaG1tX21pcnJvciAq
bWlycm9yLAorCQkJCXN0cnVjdCBobW1fcmFuZ2UgKnJhbmdlLCBib29sIGJsb2NrKQogewogCWxv
bmcgcmV0OwogCkBAIC01NDUsNyArNTQ2LDcgQEAgc3RhdGljIGlubGluZSBpbnQgaG1tX3ZtYV9m
YXVsdChzdHJ1Y3QgaG1tX3JhbmdlICpyYW5nZSwgYm9vbCBibG9jaykKIAlyYW5nZS0+ZGVmYXVs
dF9mbGFncyA9IDA7CiAJcmFuZ2UtPnBmbl9mbGFnc19tYXNrID0gLTFVTDsKIAotCXJldCA9IGht
bV9yYW5nZV9yZWdpc3RlcihyYW5nZSwgcmFuZ2UtPnZtYS0+dm1fbW0sCisJcmV0ID0gaG1tX3Jh
bmdlX3JlZ2lzdGVyKHJhbmdlLCBtaXJyb3IsCiAJCQkJIHJhbmdlLT5zdGFydCwgcmFuZ2UtPmVu
ZCwKIAkJCQkgUEFHRV9TSElGVCk7CiAJaWYgKHJldCkKZGlmZiAtLWdpdCBhL21tL2htbS5jIGIv
bW0vaG1tLmMKaW5kZXggZjY5NTZkNzhlM2NiLi4yMmE5N2FkYTEwOGIgMTAwNjQ0Ci0tLSBhL21t
L2htbS5jCisrKyBiL21tL2htbS5jCkBAIC05MTQsMTMgKzkxNCwxMyBAQCBzdGF0aWMgdm9pZCBo
bW1fcGZuc19jbGVhcihzdHJ1Y3QgaG1tX3JhbmdlICpyYW5nZSwKICAqIFRyYWNrIHVwZGF0ZXMg
dG8gdGhlIENQVSBwYWdlIHRhYmxlIHNlZSBpbmNsdWRlL2xpbnV4L2htbS5oCiAgKi8KIGludCBo
bW1fcmFuZ2VfcmVnaXN0ZXIoc3RydWN0IGhtbV9yYW5nZSAqcmFuZ2UsCi0JCSAgICAgICBzdHJ1
Y3QgbW1fc3RydWN0ICptbSwKKwkJICAgICAgIHN0cnVjdCBobW1fbWlycm9yICptaXJyb3IsCiAJ
CSAgICAgICB1bnNpZ25lZCBsb25nIHN0YXJ0LAogCQkgICAgICAgdW5zaWduZWQgbG9uZyBlbmQs
CiAJCSAgICAgICB1bnNpZ25lZCBwYWdlX3NoaWZ0KQogewogCXVuc2lnbmVkIGxvbmcgbWFzayA9
ICgoMVVMIDw8IHBhZ2Vfc2hpZnQpIC0gMVVMKTsKLQlzdHJ1Y3QgaG1tICpobW07CisJc3RydWN0
IGhtbSAqaG1tID0gbWlycm9yLT5obW07CiAKIAlyYW5nZS0+dmFsaWQgPSBmYWxzZTsKIAlyYW5n
ZS0+aG1tID0gTlVMTDsKQEAgLTkzNCwyMCArOTM0LDE1IEBAIGludCBobW1fcmFuZ2VfcmVnaXN0
ZXIoc3RydWN0IGhtbV9yYW5nZSAqcmFuZ2UsCiAJcmFuZ2UtPnN0YXJ0ID0gc3RhcnQ7CiAJcmFu
Z2UtPmVuZCA9IGVuZDsKIAotCWhtbSA9IGhtbV9nZXRfb3JfY3JlYXRlKG1tKTsKLQlpZiAoIWht
bSkKLQkJcmV0dXJuIC1FRkFVTFQ7Ci0KIAkvKiBDaGVjayBpZiBobW1fbW1fZGVzdHJveSgpIHdh
cyBjYWxsLiAqLwotCWlmIChobW0tPm1tID09IE5VTEwgfHwgaG1tLT5kZWFkKSB7Ci0JCWhtbV9w
dXQoaG1tKTsKKwlpZiAoaG1tLT5tbSA9PSBOVUxMIHx8IGhtbS0+ZGVhZCkKIAkJcmV0dXJuIC1F
RkFVTFQ7Ci0JfQogCiAJLyogSW5pdGlhbGl6ZSByYW5nZSB0byB0cmFjayBDUFUgcGFnZSB0YWJs
ZSB1cGRhdGVzLiAqLwogCW11dGV4X2xvY2soJmhtbS0+bG9jayk7CiAKIAlyYW5nZS0+aG1tID0g
aG1tOworCWtyZWZfZ2V0KCZobW0tPmtyZWYpOwogCWxpc3RfYWRkX3JjdSgmcmFuZ2UtPmxpc3Qs
ICZobW0tPnJhbmdlcyk7CiAKIAkvKgotLSAKMi4yMC4xCgpfX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fXwpOb3V2ZWF1IG1haWxpbmcgbGlzdApOb3V2ZWF1QGxp
c3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFu
L2xpc3RpbmZvL25vdXZlYXU=
