Return-Path: <nouveau-bounces@lists.freedesktop.org>
X-Original-To: lists+nouveau@lfdr.de
Delivered-To: lists+nouveau@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id EC96448218
	for <lists+nouveau@lfdr.de>; Mon, 17 Jun 2019 14:28:03 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 660AE891FB;
	Mon, 17 Jun 2019 12:28:02 +0000 (UTC)
X-Original-To: nouveau@lists.freedesktop.org
Delivered-To: nouveau@lists.freedesktop.org
Received: from bombadil.infradead.org (bombadil.infradead.org
 [IPv6:2607:7c80:54:e::133])
 by gabe.freedesktop.org (Postfix) with ESMTPS id CB8EB891FB;
 Mon, 17 Jun 2019 12:28:00 +0000 (UTC)
Received: from clnet-p19-102.ikbnet.co.at ([83.175.77.102] helo=localhost)
 by bombadil.infradead.org with esmtpsa (Exim 4.92 #3 (Red Hat Linux))
 id 1hcqjt-00008z-Cu; Mon, 17 Jun 2019 12:27:57 +0000
From: Christoph Hellwig <hch@lst.de>
To: Dan Williams <dan.j.williams@intel.com>,
 =?UTF-8?q?J=C3=A9r=C3=B4me=20Glisse?= <jglisse@redhat.com>,
 Jason Gunthorpe <jgg@mellanox.com>, Ben Skeggs <bskeggs@redhat.com>
Date: Mon, 17 Jun 2019 14:27:17 +0200
Message-Id: <20190617122733.22432-10-hch@lst.de>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190617122733.22432-1-hch@lst.de>
References: <20190617122733.22432-1-hch@lst.de>
MIME-Version: 1.0
X-SRS-Rewrite: SMTP reverse-path rewritten from <hch@infradead.org> by
 bombadil.infradead.org. See http://www.infradead.org/rpr.html
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt;
 c=relaxed/relaxed; 
 d=infradead.org; s=bombadil.20170209; h=Content-Transfer-Encoding:
 MIME-Version:References:In-Reply-To:Message-Id:Date:Subject:Cc:To:From:Sender
 :Reply-To:Content-Type:Content-ID:Content-Description:Resent-Date:Resent-From
 :Resent-Sender:Resent-To:Resent-Cc:Resent-Message-ID:List-Id:List-Help:
 List-Unsubscribe:List-Subscribe:List-Post:List-Owner:List-Archive;
 bh=/E0slfLWeDjdtwPv18O2DXUsqAiZEZlsuEH6ro3Vi90=; b=mht+KGEKXAnAR1V8Ic6+i6oeHW
 0tWBsrinEJoG1Q6hZYaYJZDrE5WGaooV4xMjhwwD4YH4ibn3pjK8izm0lzl80dlub7D0orE8Fdkf5
 IzofW4vELGo9HDVR8Gwc0xrPDGISCb8EGT81cEagR2geTnwgoEHNfc4dGwCSfRdXcU/IqTpRLx69U
 /yQ1RGQWhb/Jj50NzebHdvB/+B+EqPw7AmGeHKXz5A4TdKANBAkq9sL2W45y72Bzm/RHdno4LDYdl
 VX6SZ0S352riLt1COZSy1nR/GcbbajQqK32Bc73IiJn4fglImtfxfFJHeg0/SX7cLIatO+K34Do2X
 vCG/QNGA==;
Subject: [Nouveau] [PATCH 09/25] memremap: pass a struct dev_pagemap to
 ->kill and ->cleanup
X-BeenThere: nouveau@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Nouveau development list <nouveau.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/nouveau>,
 <mailto:nouveau-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/nouveau>
List-Post: <mailto:nouveau@lists.freedesktop.org>
List-Help: <mailto:nouveau-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/nouveau>,
 <mailto:nouveau-request@lists.freedesktop.org?subject=subscribe>
Cc: linux-nvdimm@lists.01.org, linux-pci@vger.kernel.org,
 linux-kernel@vger.kernel.org, dri-devel@lists.freedesktop.org,
 linux-mm@kvack.org, nouveau@lists.freedesktop.org,
 Logan Gunthorpe <logang@deltatee.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: nouveau-bounces@lists.freedesktop.org
Sender: "Nouveau" <nouveau-bounces@lists.freedesktop.org>

UGFzc2luZyB0aGUgYWN0dWFsIHR5cGVkIHN0cnVjdHVyZSBsZWFkcyB0byBtb3JlIHVuZGVyc3Rh
bmRhYmxlIGNvZGUKdnMganVzdCBwYXNzaW5nIHRoZSByZWYgbWVtYmVyLgoKUmVwb3J0ZWQtYnk6
IExvZ2FuIEd1bnRob3JwZSA8bG9nYW5nQGRlbHRhdGVlLmNvbT4KU2lnbmVkLW9mZi1ieTogQ2hy
aXN0b3BoIEhlbGx3aWcgPGhjaEBsc3QuZGU+ClJldmlld2VkLWJ5OiBMb2dhbiBHdW50aG9ycGUg
PGxvZ2FuZ0BkZWx0YXRlZS5jb20+ClJldmlld2VkLWJ5OiBKYXNvbiBHdW50aG9ycGUgPGpnZ0Bt
ZWxsYW5veC5jb20+ClJldmlld2VkLWJ5OiBEYW4gV2lsbGlhbXMgPGRhbi5qLndpbGxpYW1zQGlu
dGVsLmNvbT4KLS0tCiBkcml2ZXJzL2RheC9kZXZpY2UuYyAgICAgICAgICAgICAgfCAxMiArKysr
KystLS0tLS0KIGRyaXZlcnMvbnZkaW1tL3BtZW0uYyAgICAgICAgICAgICB8IDE4ICsrKysrKysr
Ky0tLS0tLS0tLQogZHJpdmVycy9wY2kvcDJwZG1hLmMgICAgICAgICAgICAgIHwgMTEgKysrKysr
LS0tLS0KIGluY2x1ZGUvbGludXgvbWVtcmVtYXAuaCAgICAgICAgICB8ICA0ICsrLS0KIGtlcm5l
bC9tZW1yZW1hcC5jICAgICAgICAgICAgICAgICB8ICA4ICsrKystLS0tCiBtbS9obW0uYyAgICAg
ICAgICAgICAgICAgICAgICAgICAgfCAxMCArKysrKy0tLS0tCiB0b29scy90ZXN0aW5nL252ZGlt
bS90ZXN0L2lvbWFwLmMgfCAgNCArKy0tCiA3IGZpbGVzIGNoYW5nZWQsIDM0IGluc2VydGlvbnMo
KyksIDMzIGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZGF4L2RldmljZS5jIGIv
ZHJpdmVycy9kYXgvZGV2aWNlLmMKaW5kZXggY2Q0ODMwNTBhNzc1Li4xN2I0NmMxYTc2YjQgMTAw
NjQ0Ci0tLSBhL2RyaXZlcnMvZGF4L2RldmljZS5jCisrKyBiL2RyaXZlcnMvZGF4L2RldmljZS5j
CkBAIC0yNywyMSArMjcsMjEgQEAgc3RhdGljIHZvaWQgZGV2X2RheF9wZXJjcHVfcmVsZWFzZShz
dHJ1Y3QgcGVyY3B1X3JlZiAqcmVmKQogCWNvbXBsZXRlKCZkZXZfZGF4LT5jbXApOwogfQogCi1z
dGF0aWMgdm9pZCBkZXZfZGF4X3BlcmNwdV9leGl0KHN0cnVjdCBwZXJjcHVfcmVmICpyZWYpCitz
dGF0aWMgdm9pZCBkZXZfZGF4X3BlcmNwdV9leGl0KHN0cnVjdCBkZXZfcGFnZW1hcCAqcGdtYXAp
CiB7Ci0Jc3RydWN0IGRldl9kYXggKmRldl9kYXggPSByZWZfdG9fZGV2X2RheChyZWYpOworCXN0
cnVjdCBkZXZfZGF4ICpkZXZfZGF4ID0gY29udGFpbmVyX29mKHBnbWFwLCBzdHJ1Y3QgZGV2X2Rh
eCwgcGdtYXApOwogCiAJZGV2X2RiZygmZGV2X2RheC0+ZGV2LCAiJXNcbiIsIF9fZnVuY19fKTsK
IAl3YWl0X2Zvcl9jb21wbGV0aW9uKCZkZXZfZGF4LT5jbXApOwotCXBlcmNwdV9yZWZfZXhpdChy
ZWYpOworCXBlcmNwdV9yZWZfZXhpdChwZ21hcC0+cmVmKTsKIH0KIAotc3RhdGljIHZvaWQgZGV2
X2RheF9wZXJjcHVfa2lsbChzdHJ1Y3QgcGVyY3B1X3JlZiAqcmVmKQorc3RhdGljIHZvaWQgZGV2
X2RheF9wZXJjcHVfa2lsbChzdHJ1Y3QgZGV2X3BhZ2VtYXAgKnBnbWFwKQogewotCXN0cnVjdCBk
ZXZfZGF4ICpkZXZfZGF4ID0gcmVmX3RvX2Rldl9kYXgocmVmKTsKKwlzdHJ1Y3QgZGV2X2RheCAq
ZGV2X2RheCA9IGNvbnRhaW5lcl9vZihwZ21hcCwgc3RydWN0IGRldl9kYXgsIHBnbWFwKTsKIAog
CWRldl9kYmcoJmRldl9kYXgtPmRldiwgIiVzXG4iLCBfX2Z1bmNfXyk7Ci0JcGVyY3B1X3JlZl9r
aWxsKHJlZik7CisJcGVyY3B1X3JlZl9raWxsKHBnbWFwLT5yZWYpOwogfQogCiBzdGF0aWMgaW50
IGNoZWNrX3ZtYShzdHJ1Y3QgZGV2X2RheCAqZGV2X2RheCwgc3RydWN0IHZtX2FyZWFfc3RydWN0
ICp2bWEsCmRpZmYgLS1naXQgYS9kcml2ZXJzL252ZGltbS9wbWVtLmMgYi9kcml2ZXJzL252ZGlt
bS9wbWVtLmMKaW5kZXggMWE5OTg2ZGM0ZGM2Li40NjlhMGY1YjMzODAgMTAwNjQ0Ci0tLSBhL2Ry
aXZlcnMvbnZkaW1tL3BtZW0uYworKysgYi9kcml2ZXJzL252ZGltbS9wbWVtLmMKQEAgLTMxMSwy
NCArMzExLDI0IEBAIHN0YXRpYyBjb25zdCBzdHJ1Y3QgYXR0cmlidXRlX2dyb3VwICpwbWVtX2F0
dHJpYnV0ZV9ncm91cHNbXSA9IHsKIAlOVUxMLAogfTsKIAotc3RhdGljIHZvaWQgcG1lbV9wYWdl
bWFwX2NsZWFudXAoc3RydWN0IHBlcmNwdV9yZWYgKnJlZikKK3N0YXRpYyB2b2lkIHBtZW1fcGFn
ZW1hcF9jbGVhbnVwKHN0cnVjdCBkZXZfcGFnZW1hcCAqcGdtYXApCiB7Ci0Jc3RydWN0IHJlcXVl
c3RfcXVldWUgKnE7CisJc3RydWN0IHJlcXVlc3RfcXVldWUgKnEgPQorCQljb250YWluZXJfb2Yo
cGdtYXAtPnJlZiwgc3RydWN0IHJlcXVlc3RfcXVldWUsIHFfdXNhZ2VfY291bnRlcik7CiAKLQlx
ID0gY29udGFpbmVyX29mKHJlZiwgdHlwZW9mKCpxKSwgcV91c2FnZV9jb3VudGVyKTsKIAlibGtf
Y2xlYW51cF9xdWV1ZShxKTsKIH0KIAotc3RhdGljIHZvaWQgcG1lbV9yZWxlYXNlX3F1ZXVlKHZv
aWQgKnJlZikKK3N0YXRpYyB2b2lkIHBtZW1fcmVsZWFzZV9xdWV1ZSh2b2lkICpwZ21hcCkKIHsK
LQlwbWVtX3BhZ2VtYXBfY2xlYW51cChyZWYpOworCXBtZW1fcGFnZW1hcF9jbGVhbnVwKHBnbWFw
KTsKIH0KIAotc3RhdGljIHZvaWQgcG1lbV9wYWdlbWFwX2tpbGwoc3RydWN0IHBlcmNwdV9yZWYg
KnJlZikKK3N0YXRpYyB2b2lkIHBtZW1fcGFnZW1hcF9raWxsKHN0cnVjdCBkZXZfcGFnZW1hcCAq
cGdtYXApCiB7Ci0Jc3RydWN0IHJlcXVlc3RfcXVldWUgKnE7CisJc3RydWN0IHJlcXVlc3RfcXVl
dWUgKnEgPQorCQljb250YWluZXJfb2YocGdtYXAtPnJlZiwgc3RydWN0IHJlcXVlc3RfcXVldWUs
IHFfdXNhZ2VfY291bnRlcik7CiAKLQlxID0gY29udGFpbmVyX29mKHJlZiwgdHlwZW9mKCpxKSwg
cV91c2FnZV9jb3VudGVyKTsKIAlibGtfZnJlZXplX3F1ZXVlX3N0YXJ0KHEpOwogfQogCkBAIC00
NDMsNyArNDQzLDcgQEAgc3RhdGljIGludCBwbWVtX2F0dGFjaF9kaXNrKHN0cnVjdCBkZXZpY2Ug
KmRldiwKIAkJbWVtY3B5KCZiYl9yZXMsICZwbWVtLT5wZ21hcC5yZXMsIHNpemVvZihiYl9yZXMp
KTsKIAl9IGVsc2UgewogCQlpZiAoZGV2bV9hZGRfYWN0aW9uX29yX3Jlc2V0KGRldiwgcG1lbV9y
ZWxlYXNlX3F1ZXVlLAotCQkJCQkmcS0+cV91c2FnZV9jb3VudGVyKSkKKwkJCQkJJnBtZW0tPnBn
bWFwKSkKIAkJCXJldHVybiAtRU5PTUVNOwogCQlhZGRyID0gZGV2bV9tZW1yZW1hcChkZXYsIHBt
ZW0tPnBoeXNfYWRkciwKIAkJCQlwbWVtLT5zaXplLCBBUkNIX01FTVJFTUFQX1BNRU0pOwpkaWZm
IC0tZ2l0IGEvZHJpdmVycy9wY2kvcDJwZG1hLmMgYi9kcml2ZXJzL3BjaS9wMnBkbWEuYwppbmRl
eCBlMDgzNTY3ZDI2ZWYuLjQ4YTg4MTU4ZTQ2YSAxMDA2NDQKLS0tIGEvZHJpdmVycy9wY2kvcDJw
ZG1hLmMKKysrIGIvZHJpdmVycy9wY2kvcDJwZG1hLmMKQEAgLTkwLDE3ICs5MCwxOCBAQCBzdGF0
aWMgdm9pZCBwY2lfcDJwZG1hX3BlcmNwdV9yZWxlYXNlKHN0cnVjdCBwZXJjcHVfcmVmICpyZWYp
CiAJY29tcGxldGUoJnAycF9wZ21hcC0+cmVmX2RvbmUpOwogfQogCi1zdGF0aWMgdm9pZCBwY2lf
cDJwZG1hX3BlcmNwdV9raWxsKHN0cnVjdCBwZXJjcHVfcmVmICpyZWYpCitzdGF0aWMgdm9pZCBw
Y2lfcDJwZG1hX3BlcmNwdV9raWxsKHN0cnVjdCBkZXZfcGFnZW1hcCAqcGdtYXApCiB7Ci0JcGVy
Y3B1X3JlZl9raWxsKHJlZik7CisJcGVyY3B1X3JlZl9raWxsKHBnbWFwLT5yZWYpOwogfQogCi1z
dGF0aWMgdm9pZCBwY2lfcDJwZG1hX3BlcmNwdV9jbGVhbnVwKHN0cnVjdCBwZXJjcHVfcmVmICpy
ZWYpCitzdGF0aWMgdm9pZCBwY2lfcDJwZG1hX3BlcmNwdV9jbGVhbnVwKHN0cnVjdCBkZXZfcGFn
ZW1hcCAqcGdtYXApCiB7Ci0Jc3RydWN0IHAycGRtYV9wYWdlbWFwICpwMnBfcGdtYXAgPSB0b19w
MnBfcGdtYXAocmVmKTsKKwlzdHJ1Y3QgcDJwZG1hX3BhZ2VtYXAgKnAycF9wZ21hcCA9CisJCWNv
bnRhaW5lcl9vZihwZ21hcCwgc3RydWN0IHAycGRtYV9wYWdlbWFwLCBwZ21hcCk7CiAKIAl3YWl0
X2Zvcl9jb21wbGV0aW9uKCZwMnBfcGdtYXAtPnJlZl9kb25lKTsKLQlwZXJjcHVfcmVmX2V4aXQo
cmVmKTsKKwlwZXJjcHVfcmVmX2V4aXQoJnAycF9wZ21hcC0+cmVmKTsKIH0KIAogc3RhdGljIHZv
aWQgcGNpX3AycGRtYV9yZWxlYXNlKHZvaWQgKmRhdGEpCmRpZmYgLS1naXQgYS9pbmNsdWRlL2xp
bnV4L21lbXJlbWFwLmggYi9pbmNsdWRlL2xpbnV4L21lbXJlbWFwLmgKaW5kZXggMWNkY2ZkNTk1
NzcwLi5jZWMwMmQ1NDAwZjEgMTAwNjQ0Ci0tLSBhL2luY2x1ZGUvbGludXgvbWVtcmVtYXAuaAor
KysgYi9pbmNsdWRlL2xpbnV4L21lbXJlbWFwLmgKQEAgLTc0LDEyICs3NCwxMiBAQCBzdHJ1Y3Qg
ZGV2X3BhZ2VtYXBfb3BzIHsKIAkvKgogCSAqIFRyYW5zaXRpb24gdGhlIHJlZmNvdW50IGluIHN0
cnVjdCBkZXZfcGFnZW1hcCB0byB0aGUgZGVhZCBzdGF0ZS4KIAkgKi8KLQl2b2lkICgqa2lsbCko
c3RydWN0IHBlcmNwdV9yZWYgKnJlZik7CisJdm9pZCAoKmtpbGwpKHN0cnVjdCBkZXZfcGFnZW1h
cCAqcGdtYXApOwogCiAJLyoKIAkgKiBXYWl0IGZvciByZWZjb3VudCBpbiBzdHJ1Y3QgZGV2X3Bh
Z2VtYXAgdG8gYmUgaWRsZSBhbmQgcmVhcCBpdC4KIAkgKi8KLQl2b2lkICgqY2xlYW51cCkoc3Ry
dWN0IHBlcmNwdV9yZWYgKnJlZik7CisJdm9pZCAoKmNsZWFudXApKHN0cnVjdCBkZXZfcGFnZW1h
cCAqcGdtYXApOwogfTsKIAogLyoqCmRpZmYgLS1naXQgYS9rZXJuZWwvbWVtcmVtYXAuYyBiL2tl
cm5lbC9tZW1yZW1hcC5jCmluZGV4IDg1NjM1ZmY1N2UwNC4uYmE3MTU2YmQ1MmQxIDEwMDY0NAot
LS0gYS9rZXJuZWwvbWVtcmVtYXAuYworKysgYi9rZXJuZWwvbWVtcmVtYXAuYwpAQCAtOTIsMTAg
KzkyLDEwIEBAIHN0YXRpYyB2b2lkIGRldm1fbWVtcmVtYXBfcGFnZXNfcmVsZWFzZSh2b2lkICpk
YXRhKQogCXVuc2lnbmVkIGxvbmcgcGZuOwogCWludCBuaWQ7CiAKLQlwZ21hcC0+b3BzLT5raWxs
KHBnbWFwLT5yZWYpOworCXBnbWFwLT5vcHMtPmtpbGwocGdtYXApOwogCWZvcl9lYWNoX2Rldmlj
ZV9wZm4ocGZuLCBwZ21hcCkKIAkJcHV0X3BhZ2UocGZuX3RvX3BhZ2UocGZuKSk7Ci0JcGdtYXAt
Pm9wcy0+Y2xlYW51cChwZ21hcC0+cmVmKTsKKwlwZ21hcC0+b3BzLT5jbGVhbnVwKHBnbWFwKTsK
IAogCS8qIHBhZ2VzIGFyZSBkZWFkIGFuZCB1bnVzZWQsIHVuZG8gdGhlIGFyY2ggbWFwcGluZyAq
LwogCWFsaWduX3N0YXJ0ID0gcmVzLT5zdGFydCAmIH4oU0VDVElPTl9TSVpFIC0gMSk7CkBAIC0y
OTksOCArMjk5LDggQEAgdm9pZCAqZGV2bV9tZW1yZW1hcF9wYWdlcyhzdHJ1Y3QgZGV2aWNlICpk
ZXYsIHN0cnVjdCBkZXZfcGFnZW1hcCAqcGdtYXApCiAgZXJyX3Bmbl9yZW1hcDoKIAlwZ21hcF9h
cnJheV9kZWxldGUocmVzKTsKICBlcnJfYXJyYXk6Ci0JcGdtYXAtPm9wcy0+a2lsbChwZ21hcC0+
cmVmKTsKLQlwZ21hcC0+b3BzLT5jbGVhbnVwKHBnbWFwLT5yZWYpOworCXBnbWFwLT5vcHMtPmtp
bGwocGdtYXApOworCXBnbWFwLT5vcHMtPmNsZWFudXAocGdtYXApOwogCXJldHVybiBFUlJfUFRS
KGVycm9yKTsKIH0KIEVYUE9SVF9TWU1CT0xfR1BMKGRldm1fbWVtcmVtYXBfcGFnZXMpOwpkaWZm
IC0tZ2l0IGEvbW0vaG1tLmMgYi9tbS9obW0uYwppbmRleCA2OTRlNTNiYzU1ZjQuLmVjM2JmMmM1
YzY5OSAxMDA2NDQKLS0tIGEvbW0vaG1tLmMKKysrIGIvbW0vaG1tLmMKQEAgLTEzNDksMTggKzEz
NDksMTggQEAgc3RhdGljIHZvaWQgaG1tX2Rldm1lbV9yZWZfcmVsZWFzZShzdHJ1Y3QgcGVyY3B1
X3JlZiAqcmVmKQogCWNvbXBsZXRlKCZkZXZtZW0tPmNvbXBsZXRpb24pOwogfQogCi1zdGF0aWMg
dm9pZCBobW1fZGV2bWVtX3JlZl9leGl0KHN0cnVjdCBwZXJjcHVfcmVmICpyZWYpCitzdGF0aWMg
dm9pZCBobW1fZGV2bWVtX3JlZl9leGl0KHN0cnVjdCBkZXZfcGFnZW1hcCAqcGdtYXApCiB7CiAJ
c3RydWN0IGhtbV9kZXZtZW0gKmRldm1lbTsKIAotCWRldm1lbSA9IGNvbnRhaW5lcl9vZihyZWYs
IHN0cnVjdCBobW1fZGV2bWVtLCByZWYpOworCWRldm1lbSA9IGNvbnRhaW5lcl9vZihwZ21hcCwg
c3RydWN0IGhtbV9kZXZtZW0sIHBhZ2VtYXApOwogCXdhaXRfZm9yX2NvbXBsZXRpb24oJmRldm1l
bS0+Y29tcGxldGlvbik7Ci0JcGVyY3B1X3JlZl9leGl0KHJlZik7CisJcGVyY3B1X3JlZl9leGl0
KHBnbWFwLT5yZWYpOwogfQogCi1zdGF0aWMgdm9pZCBobW1fZGV2bWVtX3JlZl9raWxsKHN0cnVj
dCBwZXJjcHVfcmVmICpyZWYpCitzdGF0aWMgdm9pZCBobW1fZGV2bWVtX3JlZl9raWxsKHN0cnVj
dCBkZXZfcGFnZW1hcCAqcGdtYXApCiB7Ci0JcGVyY3B1X3JlZl9raWxsKHJlZik7CisJcGVyY3B1
X3JlZl9raWxsKHBnbWFwLT5yZWYpOwogfQogCiBzdGF0aWMgdm1fZmF1bHRfdCBobW1fZGV2bWVt
X2ZhdWx0KHN0cnVjdCB2bV9hcmVhX3N0cnVjdCAqdm1hLApkaWZmIC0tZ2l0IGEvdG9vbHMvdGVz
dGluZy9udmRpbW0vdGVzdC9pb21hcC5jIGIvdG9vbHMvdGVzdGluZy9udmRpbW0vdGVzdC9pb21h
cC5jCmluZGV4IGE2NjdkOTc0MTU1ZS4uM2ExZmE3NzM1ZjQ3IDEwMDY0NAotLS0gYS90b29scy90
ZXN0aW5nL252ZGltbS90ZXN0L2lvbWFwLmMKKysrIGIvdG9vbHMvdGVzdGluZy9udmRpbW0vdGVz
dC9pb21hcC5jCkBAIC0xMDgsOCArMTA4LDggQEAgc3RhdGljIHZvaWQgbmZpdF90ZXN0X2tpbGwo
dm9pZCAqX3BnbWFwKQogewogCVdBUk5fT04oIXBnbWFwIHx8ICFwZ21hcC0+cmVmIHx8ICFwZ21h
cC0+b3BzLT5raWxsIHx8CiAJCSFwZ21hcC0+b3BzLT5jbGVhbnVwKTsKLQlwZ21hcC0+b3BzLT5r
aWxsKHBnbWFwLT5yZWYpOwotCXBnbWFwLT5vcHMtPmNsZWFudXAocGdtYXAtPnJlZik7CisJcGdt
YXAtPm9wcy0+a2lsbChwZ21hcCk7CisJcGdtYXAtPm9wcy0+Y2xlYW51cChwZ21hcCk7CiB9CiAK
IHZvaWQgKl9fd3JhcF9kZXZtX21lbXJlbWFwX3BhZ2VzKHN0cnVjdCBkZXZpY2UgKmRldiwgc3Ry
dWN0IGRldl9wYWdlbWFwICpwZ21hcCkKLS0gCjIuMjAuMQoKX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX18KTm91dmVhdSBtYWlsaW5nIGxpc3QKTm91dmVhdUBs
aXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1h
bi9saXN0aW5mby9ub3V2ZWF1
