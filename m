Return-Path: <nouveau-bounces@lists.freedesktop.org>
X-Original-To: lists+nouveau@lfdr.de
Delivered-To: lists+nouveau@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id BBD4383632
	for <lists+nouveau@lfdr.de>; Tue,  6 Aug 2019 18:06:19 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 3750D6E423;
	Tue,  6 Aug 2019 16:06:18 +0000 (UTC)
X-Original-To: nouveau@lists.freedesktop.org
Delivered-To: nouveau@lists.freedesktop.org
Received: from bombadil.infradead.org (bombadil.infradead.org
 [IPv6:2607:7c80:54:e::133])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 91ACE6E41D;
 Tue,  6 Aug 2019 16:06:17 +0000 (UTC)
Received: from [195.167.85.94] (helo=localhost)
 by bombadil.infradead.org with esmtpsa (Exim 4.92 #3 (Red Hat Linux))
 id 1hv1yY-0000ZU-88; Tue, 06 Aug 2019 16:06:14 +0000
From: Christoph Hellwig <hch@lst.de>
To: =?UTF-8?q?J=C3=A9r=C3=B4me=20Glisse?= <jglisse@redhat.com>,
 Jason Gunthorpe <jgg@mellanox.com>, Ben Skeggs <bskeggs@redhat.com>,
 Felix Kuehling <Felix.Kuehling@amd.com>
Date: Tue,  6 Aug 2019 19:05:45 +0300
Message-Id: <20190806160554.14046-8-hch@lst.de>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190806160554.14046-1-hch@lst.de>
References: <20190806160554.14046-1-hch@lst.de>
MIME-Version: 1.0
X-SRS-Rewrite: SMTP reverse-path rewritten from <hch@infradead.org> by
 bombadil.infradead.org. See http://www.infradead.org/rpr.html
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt;
 c=relaxed/relaxed; 
 d=infradead.org; s=bombadil.20170209; h=Content-Transfer-Encoding:
 MIME-Version:References:In-Reply-To:Message-Id:Date:Subject:Cc:To:From:Sender
 :Reply-To:Content-Type:Content-ID:Content-Description:Resent-Date:Resent-From
 :Resent-Sender:Resent-To:Resent-Cc:Resent-Message-ID:List-Id:List-Help:
 List-Unsubscribe:List-Subscribe:List-Post:List-Owner:List-Archive;
 bh=Q9JVQd7TJgJOaVqaurRsAZJZ/a1e9OVXXKhPpucQrUU=; b=MUB+vxB5rP4ER3qjacjm5Pc9YP
 3rAbr813U0gZg9RKoi/v6hUQNTqTGuX2TKWFEsWPO2TzaiCevtIz8l3d9wFFfuVazPHbL4Q7e3/V7
 297l7eXFcTe1sz/yBPuXzv3RlMt4n22/OHc3vCQp/7VMF48E3Fa0iWiBY0lbRVYM+hpUv8UAxCNJG
 nyFiAT9g8ZXX7m01dK89ZkBAMY31IThBAc5yPgsvVZTgPBBqOroW6dAYgn51tTUBJSlbkLe3o6Jnu
 gbVCcpEJ8Iwmt/ac+R1QY9t3e2kTHFs8ljzE8q6wgdh4Wr+DcSGIhSXm/BTvvok7Sm1Dl9CrS/CR+
 iv/kqmIQ==;
Subject: [Nouveau] [PATCH 07/15] mm: remove the page_shift member from
 struct hmm_range
X-BeenThere: nouveau@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Nouveau development list <nouveau.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/nouveau>,
 <mailto:nouveau-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/nouveau>
List-Post: <mailto:nouveau@lists.freedesktop.org>
List-Help: <mailto:nouveau-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/nouveau>,
 <mailto:nouveau-request@lists.freedesktop.org?subject=subscribe>
Cc: Ralph Campbell <rcampbell@nvidia.com>, nouveau@lists.freedesktop.org,
 linux-kernel@vger.kernel.org, amd-gfx@lists.freedesktop.org,
 linux-mm@kvack.org, dri-devel@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: nouveau-bounces@lists.freedesktop.org
Sender: "Nouveau" <nouveau-bounces@lists.freedesktop.org>

QWxsIHVzZXJzIHBhc3MgUEFHRV9TSVpFIGhlcmUsIGFuZCBpZiB3ZSB3YW50ZWQgdG8gc3VwcG9y
dCBzaW5nbGUKZW50cmllcyBmb3IgaHVnZSBwYWdlcyB3ZSBzaG91bGQgcmVhbGx5IGp1c3QgYWRk
IGEgSE1NX0ZBVUxUX0hVR0VQQUdFCmZsYWcgaW5zdGVhZCB0aGF0IHVzZXMgdGhlIGh1Z2UgcGFn
ZSBzaXplIGluc3RlYWQgb2YgaGF2aW5nIHRoZQpjYWxsZXIgY2FsY3VsYXRlIHRoYXQgc2l6ZSBv
bmNlLCBqdXN0IGZvciB0aGUgaG1tIGNvZGUgdG8gdmVyaWZ5IGl0LgoKU2lnbmVkLW9mZi1ieTog
Q2hyaXN0b3BoIEhlbGx3aWcgPGhjaEBsc3QuZGU+CkFja2VkLWJ5OiBGZWxpeCBLdWVobGluZyA8
RmVsaXguS3VlaGxpbmdAYW1kLmNvbT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9h
bWRncHVfdHRtLmMgfCAgMSAtCiBkcml2ZXJzL2dwdS9kcm0vbm91dmVhdS9ub3V2ZWF1X3N2bS5j
ICAgfCAgMSAtCiBpbmNsdWRlL2xpbnV4L2htbS5oICAgICAgICAgICAgICAgICAgICAgfCAyMiAt
LS0tLS0tLS0tLS0tCiBtbS9obW0uYyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCA0
MiArKysrKystLS0tLS0tLS0tLS0tLS0tLS0tCiA0IGZpbGVzIGNoYW5nZWQsIDkgaW5zZXJ0aW9u
cygrKSwgNTcgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9h
bWRncHUvYW1kZ3B1X3R0bS5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3R0
bS5jCmluZGV4IDcxZDZlNzA4N2IwYi4uOGJmNzkyODhjNGUyIDEwMDY0NAotLS0gYS9kcml2ZXJz
L2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdHRtLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2Ft
ZC9hbWRncHUvYW1kZ3B1X3R0bS5jCkBAIC04MTgsNyArODE4LDYgQEAgaW50IGFtZGdwdV90dG1f
dHRfZ2V0X3VzZXJfcGFnZXMoc3RydWN0IGFtZGdwdV9ibyAqYm8sIHN0cnVjdCBwYWdlICoqcGFn
ZXMpCiAJCQkJMCA6IHJhbmdlLT5mbGFnc1tITU1fUEZOX1dSSVRFXTsKIAlyYW5nZS0+cGZuX2Zs
YWdzX21hc2sgPSAwOwogCXJhbmdlLT5wZm5zID0gcGZuczsKLQlyYW5nZS0+cGFnZV9zaGlmdCA9
IFBBR0VfU0hJRlQ7CiAJcmFuZ2UtPnN0YXJ0ID0gc3RhcnQ7CiAJcmFuZ2UtPmVuZCA9IHN0YXJ0
ICsgdHRtLT5udW1fcGFnZXMgKiBQQUdFX1NJWkU7CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1
L2RybS9ub3V2ZWF1L25vdXZlYXVfc3ZtLmMgYi9kcml2ZXJzL2dwdS9kcm0vbm91dmVhdS9ub3V2
ZWF1X3N2bS5jCmluZGV4IDQxZmFkNDcxOWFjNi4uNjY4ZDRiZDBjMTE4IDEwMDY0NAotLS0gYS9k
cml2ZXJzL2dwdS9kcm0vbm91dmVhdS9ub3V2ZWF1X3N2bS5jCisrKyBiL2RyaXZlcnMvZ3B1L2Ry
bS9ub3V2ZWF1L25vdXZlYXVfc3ZtLmMKQEAgLTY4MCw3ICs2ODAsNiBAQCBub3V2ZWF1X3N2bV9m
YXVsdChzdHJ1Y3QgbnZpZl9ub3RpZnkgKm5vdGlmeSkKIAkJCSBhcmdzLmkucC5hZGRyICsgYXJn
cy5pLnAuc2l6ZSwgZm4gLSBmaSk7CiAKIAkJLyogSGF2ZSBITU0gZmF1bHQgcGFnZXMgd2l0aGlu
IHRoZSBmYXVsdCB3aW5kb3cgdG8gdGhlIEdQVS4gKi8KLQkJcmFuZ2UucGFnZV9zaGlmdCA9IFBB
R0VfU0hJRlQ7CiAJCXJhbmdlLnN0YXJ0ID0gYXJncy5pLnAuYWRkcjsKIAkJcmFuZ2UuZW5kID0g
YXJncy5pLnAuYWRkciArIGFyZ3MuaS5wLnNpemU7CiAJCXJhbmdlLnBmbnMgPSBhcmdzLnBoeXM7
CmRpZmYgLS1naXQgYS9pbmNsdWRlL2xpbnV4L2htbS5oIGIvaW5jbHVkZS9saW51eC9obW0uaApp
bmRleCBjNWI1MTM3NmI0NTMuLjUxZTE4ZmJiODk1MyAxMDA2NDQKLS0tIGEvaW5jbHVkZS9saW51
eC9obW0uaAorKysgYi9pbmNsdWRlL2xpbnV4L2htbS5oCkBAIC0xNTgsNyArMTU4LDYgQEAgZW51
bSBobW1fcGZuX3ZhbHVlX2UgewogICogQHZhbHVlczogcGZuIHZhbHVlIGZvciBzb21lIHNwZWNp
YWwgY2FzZSAobm9uZSwgc3BlY2lhbCwgZXJyb3IsIC4uLikKICAqIEBkZWZhdWx0X2ZsYWdzOiBk
ZWZhdWx0IGZsYWdzIGZvciB0aGUgcmFuZ2UgKHdyaXRlLCByZWFkLCAuLi4gc2VlIGhtbSBkb2Mp
CiAgKiBAcGZuX2ZsYWdzX21hc2s6IGFsbG93cyB0byBtYXNrIHBmbiBmbGFncyBzbyB0aGF0IG9u
bHkgZGVmYXVsdF9mbGFncyBtYXR0ZXIKLSAqIEBwYWdlX3NoaWZ0OiBkZXZpY2UgdmlydHVhbCBh
ZGRyZXNzIHNoaWZ0IHZhbHVlIChzaG91bGQgYmUgPj0gUEFHRV9TSElGVCkKICAqIEBwZm5fc2hp
ZnRzOiBwZm4gc2hpZnQgdmFsdWUgKHNob3VsZCBiZSA8PSBQQUdFX1NISUZUKQogICogQHZhbGlk
OiBwZm5zIGFycmF5IGRpZCBub3QgY2hhbmdlIHNpbmNlIGl0IGhhcyBiZWVuIGZpbGwgYnkgYW4g
SE1NIGZ1bmN0aW9uCiAgKi8KQEAgLTE3MiwzMSArMTcxLDEwIEBAIHN0cnVjdCBobW1fcmFuZ2Ug
ewogCWNvbnN0IHVpbnQ2NF90CQkqdmFsdWVzOwogCXVpbnQ2NF90CQlkZWZhdWx0X2ZsYWdzOwog
CXVpbnQ2NF90CQlwZm5fZmxhZ3NfbWFzazsKLQl1aW50OF90CQkJcGFnZV9zaGlmdDsKIAl1aW50
OF90CQkJcGZuX3NoaWZ0OwogCWJvb2wJCQl2YWxpZDsKIH07CiAKLS8qCi0gKiBobW1fcmFuZ2Vf
cGFnZV9zaGlmdCgpIC0gcmV0dXJuIHRoZSBwYWdlIHNoaWZ0IGZvciB0aGUgcmFuZ2UKLSAqIEBy
YW5nZTogcmFuZ2UgYmVpbmcgcXVlcmllZAotICogUmV0dXJuOiBwYWdlIHNoaWZ0IChwYWdlIHNp
emUgPSAxIDw8IHBhZ2Ugc2hpZnQpIGZvciB0aGUgcmFuZ2UKLSAqLwotc3RhdGljIGlubGluZSB1
bnNpZ25lZCBobW1fcmFuZ2VfcGFnZV9zaGlmdChjb25zdCBzdHJ1Y3QgaG1tX3JhbmdlICpyYW5n
ZSkKLXsKLQlyZXR1cm4gcmFuZ2UtPnBhZ2Vfc2hpZnQ7Ci19Ci0KLS8qCi0gKiBobW1fcmFuZ2Vf
cGFnZV9zaXplKCkgLSByZXR1cm4gdGhlIHBhZ2Ugc2l6ZSBmb3IgdGhlIHJhbmdlCi0gKiBAcmFu
Z2U6IHJhbmdlIGJlaW5nIHF1ZXJpZWQKLSAqIFJldHVybjogcGFnZSBzaXplIGZvciB0aGUgcmFu
Z2UgaW4gYnl0ZXMKLSAqLwotc3RhdGljIGlubGluZSB1bnNpZ25lZCBsb25nIGhtbV9yYW5nZV9w
YWdlX3NpemUoY29uc3Qgc3RydWN0IGhtbV9yYW5nZSAqcmFuZ2UpCi17Ci0JcmV0dXJuIDFVTCA8
PCBobW1fcmFuZ2VfcGFnZV9zaGlmdChyYW5nZSk7Ci19Ci0KIC8qCiAgKiBobW1fcmFuZ2Vfd2Fp
dF91bnRpbF92YWxpZCgpIC0gd2FpdCBmb3IgcmFuZ2UgdG8gYmUgdmFsaWQKICAqIEByYW5nZTog
cmFuZ2UgYWZmZWN0ZWQgYnkgaW52YWxpZGF0aW9uIHRvIHdhaXQgb24KZGlmZiAtLWdpdCBhL21t
L2htbS5jIGIvbW0vaG1tLmMKaW5kZXggOTI2NzM1YTNhZWY5Li5mMjZkNmFiYzRlZDIgMTAwNjQ0
Ci0tLSBhL21tL2htbS5jCisrKyBiL21tL2htbS5jCkBAIC0zNDQsMTMgKzM0NCwxMiBAQCBzdGF0
aWMgaW50IGhtbV92bWFfd2Fsa19ob2xlXyh1bnNpZ25lZCBsb25nIGFkZHIsIHVuc2lnbmVkIGxv
bmcgZW5kLAogCXN0cnVjdCBobW1fdm1hX3dhbGsgKmhtbV92bWFfd2FsayA9IHdhbGstPnByaXZh
dGU7CiAJc3RydWN0IGhtbV9yYW5nZSAqcmFuZ2UgPSBobW1fdm1hX3dhbGstPnJhbmdlOwogCXVp
bnQ2NF90ICpwZm5zID0gcmFuZ2UtPnBmbnM7Ci0JdW5zaWduZWQgbG9uZyBpLCBwYWdlX3NpemU7
CisJdW5zaWduZWQgbG9uZyBpOwogCiAJaG1tX3ZtYV93YWxrLT5sYXN0ID0gYWRkcjsKLQlwYWdl
X3NpemUgPSBobW1fcmFuZ2VfcGFnZV9zaXplKHJhbmdlKTsKLQlpID0gKGFkZHIgLSByYW5nZS0+
c3RhcnQpID4+IHJhbmdlLT5wYWdlX3NoaWZ0OworCWkgPSAoYWRkciAtIHJhbmdlLT5zdGFydCkg
Pj4gUEFHRV9TSElGVDsKIAotCWZvciAoOyBhZGRyIDwgZW5kOyBhZGRyICs9IHBhZ2Vfc2l6ZSwg
aSsrKSB7CisJZm9yICg7IGFkZHIgPCBlbmQ7IGFkZHIgKz0gUEFHRV9TSVpFLCBpKyspIHsKIAkJ
cGZuc1tpXSA9IHJhbmdlLT52YWx1ZXNbSE1NX1BGTl9OT05FXTsKIAkJaWYgKGZhdWx0IHx8IHdy
aXRlX2ZhdWx0KSB7CiAJCQlpbnQgcmV0OwpAQCAtNzcyLDcgKzc3MSw3IEBAIHN0YXRpYyBpbnQg
aG1tX3ZtYV93YWxrX2h1Z2V0bGJfZW50cnkocHRlX3QgKnB0ZSwgdW5zaWduZWQgbG9uZyBobWFz
aywKIAkJCQkgICAgICBzdHJ1Y3QgbW1fd2FsayAqd2FsaykKIHsKICNpZmRlZiBDT05GSUdfSFVH
RVRMQl9QQUdFCi0JdW5zaWduZWQgbG9uZyBhZGRyID0gc3RhcnQsIGksIHBmbiwgbWFzaywgc2l6
ZSwgcGZuX2luYzsKKwl1bnNpZ25lZCBsb25nIGFkZHIgPSBzdGFydCwgaSwgcGZuLCBtYXNrOwog
CXN0cnVjdCBobW1fdm1hX3dhbGsgKmhtbV92bWFfd2FsayA9IHdhbGstPnByaXZhdGU7CiAJc3Ry
dWN0IGhtbV9yYW5nZSAqcmFuZ2UgPSBobW1fdm1hX3dhbGstPnJhbmdlOwogCXN0cnVjdCB2bV9h
cmVhX3N0cnVjdCAqdm1hID0gd2Fsay0+dm1hOwpAQCAtNzgzLDI0ICs3ODIsMTIgQEAgc3RhdGlj
IGludCBobW1fdm1hX3dhbGtfaHVnZXRsYl9lbnRyeShwdGVfdCAqcHRlLCB1bnNpZ25lZCBsb25n
IGhtYXNrLAogCXB0ZV90IGVudHJ5OwogCWludCByZXQgPSAwOwogCi0Jc2l6ZSA9IGh1Z2VfcGFn
ZV9zaXplKGgpOwotCW1hc2sgPSBzaXplIC0gMTsKLQlpZiAocmFuZ2UtPnBhZ2Vfc2hpZnQgIT0g
UEFHRV9TSElGVCkgewotCQkvKiBNYWtlIHN1cmUgd2UgYXJlIGxvb2tpbmcgYXQgYSBmdWxsIHBh
Z2UuICovCi0JCWlmIChzdGFydCAmIG1hc2spCi0JCQlyZXR1cm4gLUVJTlZBTDsKLQkJaWYgKGVu
ZCA8IChzdGFydCArIHNpemUpKQotCQkJcmV0dXJuIC1FSU5WQUw7Ci0JCXBmbl9pbmMgPSBzaXpl
ID4+IFBBR0VfU0hJRlQ7Ci0JfSBlbHNlIHsKLQkJcGZuX2luYyA9IDE7Ci0JCXNpemUgPSBQQUdF
X1NJWkU7Ci0JfQorCW1hc2sgPSBodWdlX3BhZ2Vfc2l6ZShoKSAtIDE7CiAKIAlwdGwgPSBodWdl
X3B0ZV9sb2NrKGhzdGF0ZV92bWEodm1hKSwgd2Fsay0+bW0sIHB0ZSk7CiAJZW50cnkgPSBodWdl
X3B0ZXBfZ2V0KHB0ZSk7CiAKLQlpID0gKHN0YXJ0IC0gcmFuZ2UtPnN0YXJ0KSA+PiByYW5nZS0+
cGFnZV9zaGlmdDsKKwlpID0gKHN0YXJ0IC0gcmFuZ2UtPnN0YXJ0KSA+PiBQQUdFX1NISUZUOwog
CW9yaWdfcGZuID0gcmFuZ2UtPnBmbnNbaV07CiAJcmFuZ2UtPnBmbnNbaV0gPSByYW5nZS0+dmFs
dWVzW0hNTV9QRk5fTk9ORV07CiAJY3B1X2ZsYWdzID0gcHRlX3RvX2htbV9wZm5fZmxhZ3MocmFu
Z2UsIGVudHJ5KTsKQEAgLTgxMiw4ICs3OTksOCBAQCBzdGF0aWMgaW50IGhtbV92bWFfd2Fsa19o
dWdldGxiX2VudHJ5KHB0ZV90ICpwdGUsIHVuc2lnbmVkIGxvbmcgaG1hc2ssCiAJCWdvdG8gdW5s
b2NrOwogCX0KIAotCXBmbiA9IHB0ZV9wZm4oZW50cnkpICsgKChzdGFydCAmIG1hc2spID4+IHJh
bmdlLT5wYWdlX3NoaWZ0KTsKLQlmb3IgKDsgYWRkciA8IGVuZDsgYWRkciArPSBzaXplLCBpKyss
IHBmbiArPSBwZm5faW5jKQorCXBmbiA9IHB0ZV9wZm4oZW50cnkpICsgKChzdGFydCAmIG1hc2sp
ID4+IFBBR0VfU0hJRlQpOworCWZvciAoOyBhZGRyIDwgZW5kOyBhZGRyICs9IFBBR0VfU0laRSwg
aSsrLCBwZm4rKykKIAkJcmFuZ2UtPnBmbnNbaV0gPSBobW1fZGV2aWNlX2VudHJ5X2Zyb21fcGZu
KHJhbmdlLCBwZm4pIHwKIAkJCQkgY3B1X2ZsYWdzOwogCWhtbV92bWFfd2Fsay0+bGFzdCA9IGVu
ZDsKQEAgLTg1MCwxNCArODM3LDEzIEBAIHN0YXRpYyB2b2lkIGhtbV9wZm5zX2NsZWFyKHN0cnVj
dCBobW1fcmFuZ2UgKnJhbmdlLAogICovCiBpbnQgaG1tX3JhbmdlX3JlZ2lzdGVyKHN0cnVjdCBo
bW1fcmFuZ2UgKnJhbmdlLCBzdHJ1Y3QgaG1tX21pcnJvciAqbWlycm9yKQogewotCXVuc2lnbmVk
IGxvbmcgbWFzayA9ICgoMVVMIDw8IHJhbmdlLT5wYWdlX3NoaWZ0KSAtIDFVTCk7CiAJc3RydWN0
IGhtbSAqaG1tID0gbWlycm9yLT5obW07CiAJdW5zaWduZWQgbG9uZyBmbGFnczsKIAogCXJhbmdl
LT52YWxpZCA9IGZhbHNlOwogCXJhbmdlLT5obW0gPSBOVUxMOwogCi0JaWYgKChyYW5nZS0+c3Rh
cnQgJiBtYXNrKSB8fCAocmFuZ2UtPmVuZCAmIG1hc2spKQorCWlmICgocmFuZ2UtPnN0YXJ0ICYg
KFBBR0VfU0laRSAtIDEpKSB8fCAocmFuZ2UtPmVuZCAmIChQQUdFX1NJWkUgLSAxKSkpCiAJCXJl
dHVybiAtRUlOVkFMOwogCWlmIChyYW5nZS0+c3RhcnQgPj0gcmFuZ2UtPmVuZCkKIAkJcmV0dXJu
IC1FSU5WQUw7CkBAIC05NjQsMTYgKzk1MCw2IEBAIGxvbmcgaG1tX3JhbmdlX2ZhdWx0KHN0cnVj
dCBobW1fcmFuZ2UgKnJhbmdlLCB1bnNpZ25lZCBpbnQgZmxhZ3MpCiAJCWlmICh2bWEgPT0gTlVM
TCB8fCAodm1hLT52bV9mbGFncyAmIGRldmljZV92bWEpKQogCQkJcmV0dXJuIC1FRkFVTFQ7CiAK
LQkJaWYgKGlzX3ZtX2h1Z2V0bGJfcGFnZSh2bWEpKSB7Ci0JCQlpZiAoaHVnZV9wYWdlX3NoaWZ0
KGhzdGF0ZV92bWEodm1hKSkgIT0KLQkJCSAgICByYW5nZS0+cGFnZV9zaGlmdCAmJgotCQkJICAg
IHJhbmdlLT5wYWdlX3NoaWZ0ICE9IFBBR0VfU0hJRlQpCi0JCQkJcmV0dXJuIC1FSU5WQUw7Ci0J
CX0gZWxzZSB7Ci0JCQlpZiAocmFuZ2UtPnBhZ2Vfc2hpZnQgIT0gUEFHRV9TSElGVCkKLQkJCQly
ZXR1cm4gLUVJTlZBTDsKLQkJfQotCiAJCWlmICghKHZtYS0+dm1fZmxhZ3MgJiBWTV9SRUFEKSkg
ewogCQkJLyoKIAkJCSAqIElmIHZtYSBkbyBub3QgYWxsb3cgcmVhZCBhY2Nlc3MsIHRoZW4gYXNz
dW1lIHRoYXQgaXQKLS0gCjIuMjAuMQoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX18KTm91dmVhdSBtYWlsaW5nIGxpc3QKTm91dmVhdUBsaXN0cy5mcmVlZGVz
a3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9u
b3V2ZWF1
